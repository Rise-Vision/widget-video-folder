function init(e,t,n){window.oncontextmenu=function(){return!1},width=e.width,height=e.height,skin=n,controls=e.video.controls,volume=e.video.volume,scaleToFit=e.video.scaleToFit,autoPlay=controls?e.video.autoplay:!0,e.video.pause="string"==typeof e.video.pause?parseInt(e.video.pause,10):e.video.pause,pauseDuration="number"==typeof e.video.pause?e.video.pause:0,files=t,player=new PlayerJW,player.loadVideo()}function doneEvent(){parent.RiseVision.VideoFolder.playerEnded()}function readyEvent(){parent.RiseVision.VideoFolder.playerReady()}function errorEvent(e){parent.RiseVision.VideoFolder.playerError(e)}function play(){player.play()}function pause(){player.pause()}function stop(){player.stop()}function remove(){player.remove()}function getPlaybackData(){return{total:files.length,index:player.getCurrentIndex(),duration:player.getDuration(),position:player.getPosition()}}function PlayerJW(){function e(e){var t,n=[".mp4",".webm",".ogg",".ogv"],o=e.toLowerCase(),a=null;for(t=0;t<=n.length;t+=1)if(-1!==o.indexOf(n[t])){a=n[t].substr(n[t].lastIndexOf(".")+1);break}return"ogv"===a&&(a="ogg"),a}function t(){for(var t=[],n=0;n<files.length;n+=1)t.push({sources:[{file:files[n],type:e(files[n])}]});return t}function n(){doneEvent()}function o(){isLoading?(isLoading=!1,jwplayer().pause(),jwplayer().setMute(!1),jwplayer().setVolume(volume),controls&&!autoPlay&&jwplayer().setControls(!0),readyEvent()):(controls&&pauseDuration>1&&!pauseHandlerOn&&(pauseHandlerOn=!0,jwplayer().onPause(function(){a()})),clearTimeout(pauseTimer))}function a(){viewerPaused||isLoading||(clearTimeout(pauseTimer),pauseTimer=setTimeout(function(){jwplayer().play(),jwplayer().setControls(!1),jwplayer().setControls(!0)},1e3*pauseDuration))}function i(e){e&&errorEvent({type:"video",index:jwplayer().getPlaylistIndex(),message:e.message})}function r(e){e&&errorEvent({type:"setup",index:0,message:e.message})}this.loadVideo=function(){jwplayer("player").setup({playlist:t(),width:width,height:height,controls:!1,stretching:scaleToFit?"uniform":"none",skin:skin}),jwplayer().onSetupError(function(e){r(e)}),jwplayer().onReady(function(){var e,t=document.getElementById("player").getElementsByTagName("*"),a=t.length;for(e=0;a>e;e+=1)t[e].className+=" notransition";document.getElementById("player").className+=" notransition",jwplayer().onPlaylistComplete(function(){n()}),jwplayer().onPlay(function(){o()}),jwplayer().onError(function(e){i(e)}),setTimeout(function(){jwplayer().play()},200)})},this.play=function(){viewerPaused=!1,autoPlay&&(controls&&!jwplayer().getControls()&&jwplayer().setControls(!0),jwplayer().play(),controls&&(jwplayer().setControls(!1),jwplayer().setControls(!0)))},this.pause=function(){viewerPaused=!0,clearTimeout(pauseTimer),jwplayer().pause()},this.stop=function(){this.pause()},this.remove=function(){viewerPaused=!1,clearTimeout(pauseTimer),pauseTimer=null,jwplayer().remove()},this.getCurrentIndex=function(){return jwplayer().getPlaylistIndex()},this.getDuration=function(){return jwplayer().getDuration()},this.getPosition=function(){return jwplayer().getPosition()}}var files,controls,volume,autoPlay,scaleToFit,pauseDuration,width,height,skin,isLoading=!0,pauseHandlerOn=!1,viewerPaused=!1,pauseTimer=null,player=null;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3BsYXllci5taW4uanMiXSwibmFtZXMiOlsiaW5pdCIsInBhcmFtcyIsImxpc3QiLCJza2luVmFsIiwid2luZG93Iiwib25jb250ZXh0bWVudSIsIndpZHRoIiwiaGVpZ2h0Iiwic2tpbiIsImNvbnRyb2xzIiwidmlkZW8iLCJ2b2x1bWUiLCJzY2FsZVRvRml0IiwiYXV0b1BsYXkiLCJhdXRvcGxheSIsInBhdXNlIiwicGFyc2VJbnQiLCJwYXVzZUR1cmF0aW9uIiwiZmlsZXMiLCJwbGF5ZXIiLCJQbGF5ZXJKVyIsImxvYWRWaWRlbyIsImRvbmVFdmVudCIsInBhcmVudCIsIlJpc2VWaXNpb24iLCJWaWRlb0ZvbGRlciIsInBsYXllckVuZGVkIiwicmVhZHlFdmVudCIsInBsYXllclJlYWR5IiwiZXJyb3JFdmVudCIsImRhdGEiLCJwbGF5ZXJFcnJvciIsInBsYXkiLCJzdG9wIiwicmVtb3ZlIiwiZ2V0UGxheWJhY2tEYXRhIiwidG90YWwiLCJsZW5ndGgiLCJpbmRleCIsImdldEN1cnJlbnRJbmRleCIsImR1cmF0aW9uIiwiZ2V0RHVyYXRpb24iLCJwb3NpdGlvbiIsImdldFBvc2l0aW9uIiwiZ2V0VmlkZW9GaWxlVHlwZSIsInVybCIsImkiLCJleHRlbnNpb25zIiwidXJsTG93ZXJjYXNlIiwidG9Mb3dlckNhc2UiLCJ0eXBlIiwiaW5kZXhPZiIsInN1YnN0ciIsImxhc3RJbmRleE9mIiwiZ2V0UGxheWxpc3QiLCJwbGF5bGlzdCIsInB1c2giLCJzb3VyY2VzIiwiZmlsZSIsIm9uUGxheWxpc3RDb21wbGV0ZSIsIm9uUGxheSIsImlzTG9hZGluZyIsImp3cGxheWVyIiwic2V0TXV0ZSIsInNldFZvbHVtZSIsInNldENvbnRyb2xzIiwicGF1c2VIYW5kbGVyT24iLCJvblBhdXNlIiwiY2xlYXJUaW1lb3V0IiwicGF1c2VUaW1lciIsInZpZXdlclBhdXNlZCIsInNldFRpbWVvdXQiLCJvblBsYXllckVycm9yIiwiZXJyb3IiLCJnZXRQbGF5bGlzdEluZGV4IiwibWVzc2FnZSIsIm9uU2V0dXBFcnJvciIsInRoaXMiLCJzZXR1cCIsInN0cmV0Y2hpbmciLCJvblJlYWR5IiwiZWxlbWVudHMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJjbGFzc05hbWUiLCJvbkVycm9yIiwiZ2V0Q29udHJvbHMiXSwibWFwcGluZ3MiOiJBQVlBLFFBQVNBLE1BQUtDLEVBQVFDLEVBQU1DLEdBQzFCQyxPQUFPQyxjQUFnQixXQUNyQixPQUFPLEdBR1RDLE1BQVFMLEVBQU9LLE1BQ2ZDLE9BQVNOLEVBQU9NLE9BQ2hCQyxLQUFPTCxFQUNQTSxTQUFXUixFQUFPUyxNQUFNRCxTQUN4QkUsT0FBU1YsRUFBT1MsTUFBTUMsT0FDdEJDLFdBQWFYLEVBQU9TLE1BQU1FLFdBRzFCQyxTQUFhSixTQUFtQlIsRUFBT1MsTUFBTUksVUFBcEIsRUFFekJiLEVBQU9TLE1BQU1LLE1BQXVDLGdCQUF2QmQsR0FBT1MsTUFBTUssTUFBc0JDLFNBQVNmLEVBQU9TLE1BQU1LLE1BQU8sSUFBTWQsRUFBT1MsTUFBTUssTUFFaEhFLGNBQStDLGdCQUF2QmhCLEdBQU9TLE1BQU1LLE1BQXNCZCxFQUFPUyxNQUFNSyxNQUFRLEVBRWhGRyxNQUFRaEIsRUFFUmlCLE9BQVMsR0FBSUMsVUFDYkQsT0FBT0UsWUFHVCxRQUFTQyxhQUNQQyxPQUFPQyxXQUFXQyxZQUFZQyxjQUdoQyxRQUFTQyxjQUNQSixPQUFPQyxXQUFXQyxZQUFZRyxjQUdoQyxRQUFTQyxZQUFXQyxHQUNsQlAsT0FBT0MsV0FBV0MsWUFBWU0sWUFBWUQsR0FHNUMsUUFBU0UsUUFDUGIsT0FBT2EsT0FHVCxRQUFTakIsU0FDUEksT0FBT0osUUFHVCxRQUFTa0IsUUFDUGQsT0FBT2MsT0FHVCxRQUFTQyxVQUNQZixPQUFPZSxTQUdULFFBQVNDLG1CQUNQLE9BQ0VDLE1BQU9sQixNQUFNbUIsT0FDYkMsTUFBT25CLE9BQU9vQixrQkFDZEMsU0FBVXJCLE9BQU9zQixjQUNqQkMsU0FBVXZC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V25CLGVBalJ0QixHQUFJekIsT0FDQVQsU0FBVUUsT0FBUUUsU0FBVUQsV0FBWUssY0FDeENYLE1BQU9DLE9BQVFDLEtBRWZxRCxXQUFZLEVBQ2RLLGdCQUFpQixFQUVmSSxjQUFlLEVBQ2ZELFdBQWEsS0FFYmxELE9BQVMiLCJmaWxlIjoianMvcGxheWVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBmaWxlcztcbnZhciBjb250cm9scywgdm9sdW1lLCBhdXRvUGxheSwgc2NhbGVUb0ZpdCwgcGF1c2VEdXJhdGlvbjtcbnZhciB3aWR0aCwgaGVpZ2h0LCBza2luO1xuXG52YXIgaXNMb2FkaW5nID0gdHJ1ZSxcbiAgcGF1c2VIYW5kbGVyT24gPSBmYWxzZTtcblxudmFyIHZpZXdlclBhdXNlZCA9IGZhbHNlO1xudmFyIHBhdXNlVGltZXIgPSBudWxsO1xuXG52YXIgcGxheWVyID0gbnVsbDtcblxuZnVuY3Rpb24gaW5pdChwYXJhbXMsIGxpc3QsIHNraW5WYWwpIHtcbiAgd2luZG93Lm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH07XG5cbiAgd2lkdGggPSBwYXJhbXMud2lkdGg7XG4gIGhlaWdodCA9IHBhcmFtcy5oZWlnaHQ7XG4gIHNraW4gPSBza2luVmFsO1xuICBjb250cm9scyA9IHBhcmFtcy52aWRlby5jb250cm9scztcbiAgdm9sdW1lID0gcGFyYW1zLnZpZGVvLnZvbHVtZTtcbiAgc2NhbGVUb0ZpdCA9IHBhcmFtcy52aWRlby5zY2FsZVRvRml0O1xuXG4gIC8vIGVuc3VyZSBhdXRvUGxheSBpcyB0cnVlIGlmIGNvbnRyb2xzIHZhbHVlIGlzIGZhbHNlLCBvdGhlcndpc2UgdXNlIHBhcmFtcyB2YWx1ZVxuICBhdXRvUGxheSA9ICghY29udHJvbHMpID8gdHJ1ZSA6IHBhcmFtcy52aWRlby5hdXRvcGxheTtcbiAgLy8gY29udmVydCBwYXVzZSB2YWx1ZSB0byBudW1iZXIgaWYgdHlwZSBpcyBcInN0cmluZ1wiXG4gIHBhcmFtcy52aWRlby5wYXVzZSA9ICh0eXBlb2YgcGFyYW1zLnZpZGVvLnBhdXNlID09PSBcInN0cmluZ1wiKSA/IHBhcnNlSW50KHBhcmFtcy52aWRlby5wYXVzZSwgMTApIDogcGFyYW1zLnZpZGVvLnBhdXNlO1xuICAvLyBpZiBub3Qgb2YgdHlwZSBcIm51bWJlclwiLCBzZXQgaXRzIHZhbHVlIHRvIDAgc28gYSBwYXVzZSBkb2VzIG5vdCBnZXQgYXBwbGllZFxuICBwYXVzZUR1cmF0aW9uID0gKHR5cGVvZiBwYXJhbXMudmlkZW8ucGF1c2UgPT09IFwibnVtYmVyXCIpID8gcGFyYW1zLnZpZGVvLnBhdXNlIDogMDtcblxuICBmaWxlcyA9IGxpc3Q7XG5cbiAgcGxheWVyID0gbmV3IFBsYXllckpXKCk7XG4gIHBsYXllci5sb2FkVmlkZW8oKTtcbn1cblxuZnVuY3Rpb24gZG9uZUV2ZW50KCkge1xuICBwYXJlbnQuUmlzZVZpc2lvbi5WaWRlb0ZvbGRlci5wbGF5ZXJFbmRlZCgpO1xufVxuXG5mdW5jdGlvbiByZWFkeUV2ZW50KCkge1xuICBwYXJlbnQuUmlzZVZpc2lvbi5WaWRlb0ZvbGRlci5wbGF5ZXJSZWFkeSgpO1xufVxuXG5mdW5jdGlvbiBlcnJvckV2ZW50KGRhdGEpIHtcbiAgcGFyZW50LlJpc2VWaXNpb24uVmlkZW9Gb2xkZXIucGxheWVyRXJyb3IoZGF0YSk7XG59XG5cbmZ1bmN0aW9uIHBsYXkoKSB7XG4gIHBsYXllci5wbGF5KCk7XG59XG5cbmZ1bmN0aW9uIHBhdXNlKCkge1xuICBwbGF5ZXIucGF1c2UoKTtcbn1cblxuZnVuY3Rpb24gc3RvcCgpIHtcbiAgcGxheWVyLnN0b3AoKTtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlKCkge1xuICBwbGF5ZXIucmVtb3ZlKCk7XG59XG5cbmZ1bmN0aW9uIGdldFBsYXliYWNrRGF0YSgpIHtcbiAgcmV0dXJuIHtcbiAgICB0b3RhbDogZmlsZXMubGVuZ3RoLFxuICAgIGluZGV4OiBwbGF5ZXIuZ2V0Q3VycmVudEluZGV4KCksXG4gICAgZHVyYXRpb246IHBsYXllci5nZXREdXJhdGlvbigpLFxuICAgIHBvc2l0aW9uOiBwbGF5ZXIuZ2V0UG9zaXRpb24oKVxuICB9XG59XG5cbmZ1bmN0aW9uIFBsYXllckpXKCkge1xuICBmdW5jdGlvbiBnZXRWaWRlb0ZpbGVUeXBlKHVybCkge1xuICAgIHZhciBleHRlbnNpb25zID0gW1wiLm1wNFwiLCBcIi53ZWJtXCIsIFwiLm9nZ1wiLCBcIi5vZ3ZcIl0sXG4gICAgICB1cmxMb3dlcmNhc2UgPSB1cmwudG9Mb3dlckNhc2UoKSxcbiAgICAgIHR5cGUgPSBudWxsLFxuICAgICAgaTtcblxuICAgIGZvciAoaSA9IDA7IGkgPD0gZXh0ZW5zaW9ucy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgaWYgKHVybExvd2VyY2FzZS5pbmRleE9mKGV4dGVuc2lvbnNbaV0pICE9PSAtMSkge1xuICAgICAgICB0eXBlID0gZXh0ZW5zaW9uc1tpXS5zdWJzdHIoZXh0ZW5zaW9uc1tpXS5sYXN0SW5kZXhPZihcIi5cIikgKyAxKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGUgPT09IFwib2d2XCIpIHtcbiAgICAgIHR5cGUgPSBcIm9nZ1wiO1xuICAgIH1cblxuICAgIHJldHVybiB0eXBlO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0UGxheWxpc3QoKSB7XG4gICAgdmFyIHBsYXlsaXN0ID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBwbGF5bGlzdC5wdXNoKHtcbiAgICAgICAgc291cmNlczogW3tcbiAgICAgICAgICBmaWxlOiBmaWxlc1tpXSxcbiAgICAgICAgICB0eXBlOiBnZXRWaWRlb0ZpbGVUeXBlKGZpbGVzW2ldKVxuICAgICAgICB9XVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBsYXlsaXN0O1xuICB9XG5cbiAgZnVuY3Rpb24gb25QbGF5bGlzdENvbXBsZXRlKCkge1xuICAgIGRvbmVFdmVudCgpO1xuICB9XG5cbiAgZnVuY3Rpb24gb25QbGF5KCkge1xuICAgIGlmIChpc0xvYWRpbmcpIHtcbiAgICAgIGlzTG9hZGluZyA9IGZhbHNlO1xuXG4gICAgICBqd3BsYXllcigpLnBhdXNlKCk7XG4gICAgICBqd3BsYXllcigpLnNldE11dGUoZmFsc2UpO1xuICAgICAgandwbGF5ZXIoKS5zZXRWb2x1bWUodm9sdW1lKTtcblxuICAgICAgaWYgKGNvbnRyb2xzICYmICFhdXRvUGxheSkge1xuICAgICAgICBqd3BsYXllcigpLnNldENvbnRyb2xzKHRydWUpO1xuICAgICAgfVxuXG4gICAgICByZWFkeUV2ZW50KCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGNvbnRyb2xzICYmIHBhdXNlRHVyYXRpb24gPiAxICYmICFwYXVzZUhhbmRsZXJPbikge1xuICAgICAgICBwYXVzZUhhbmRsZXJPbiA9IHRydWU7XG5cbiAgICAgICAgLy8gbm93IGRlZmluZSBwYXVzZSBoYW5kbGVyXG4gICAgICAgIGp3cGxheWVyKCkub25QYXVzZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgb25QYXVzZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY2xlYXJUaW1lb3V0KHBhdXNlVGltZXIpO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gb25QYXVzZSgpIHtcbiAgICBpZiAoIXZpZXdlclBhdXNlZCAmJiAhaXNMb2FkaW5nKSB7XG4gICAgICAvLyB1c2VyIGhhcyBwYXVzZWQsIHNldCBhIHRpbWVyIHRvIHBsYXkgYWdhaW5cbiAgICAgIGNsZWFyVGltZW91dChwYXVzZVRpbWVyKTtcblxuICAgICAgcGF1c2VUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlIHBsYXlpbmcgdGhlIGN1cnJlbnQgdmlkZW9cbiAgICAgICAgandwbGF5ZXIoKS5wbGF5KCk7XG5cbiAgICAgICAgLy8gd29ya2Fyb3VuZCBmb3IgY29udHJvbHMgcmVtYWluaW5nIHZpc2libGUsIHR1cm4gdGhlbSBvZmYgYW5kIG9uIGFnYWluXG4gICAgICAgIGp3cGxheWVyKCkuc2V0Q29udHJvbHMoZmFsc2UpO1xuICAgICAgICBqd3BsYXllcigpLnNldENvbnRyb2xzKHRydWUpO1xuXG4gICAgICB9LCBwYXVzZUR1cmF0aW9uICogMTAwMCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25QbGF5ZXJFcnJvcihlcnJvcikge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgZXJyb3JFdmVudCh7XG4gICAgICAgIHR5cGU6IFwidmlkZW9cIixcbiAgICAgICAgaW5kZXg6IGp3cGxheWVyKCkuZ2V0UGxheWxpc3RJbmRleCgpLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblNldHVwRXJyb3IoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGVycm9yRXZlbnQoe1xuICAgICAgICB0eXBlOiBcInNldHVwXCIsXG4gICAgICAgIGluZGV4OiAwLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICB0aGlzLmxvYWRWaWRlbyA9IGZ1bmN0aW9uKCkge1xuICAgIGp3cGxheWVyKFwicGxheWVyXCIpLnNldHVwKHtcbiAgICAgIHBsYXlsaXN0OiBnZXRQbGF5bGlzdCgpLFxuICAgICAgd2lkdGggOiB3aWR0aCxcbiAgICAgIGhlaWdodCA6IGhlaWdodCxcbiAgICAgIGNvbnRyb2xzOiBmYWxzZSxcbiAgICAgIHN0cmV0Y2hpbmcgOiBzY2FsZVRvRml0ID8gXCJ1bmlmb3JtXCIgOiBcIm5vbmVcIixcbiAgICAgIHNraW46IHNraW5cbiAgICB9KTtcblxuICAgIGp3cGxheWVyKCkub25TZXR1cEVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgb25TZXR1cEVycm9yKGVycm9yKTtcbiAgICB9KTtcblxuICAgIGp3cGxheWVyKCkub25SZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllclwiKS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIiksXG4gICAgICAgIHRvdGFsID0gZWxlbWVudHMubGVuZ3RoLFxuICAgICAgICBpO1xuXG4gICAgICAvLyBXb3JrYXJvdW5kIGZvciBDaHJvbWUgQXBwIFBsYXllciA8d2Vidmlldz4gbm90IGhhbmRsaW5nIENTUzMgdHJhbnNpdGlvblxuICAgICAgZm9yIChpID0gMDsgaSA8IHRvdGFsOyBpICs9IDEpIHtcbiAgICAgICAgZWxlbWVudHNbaV0uY2xhc3NOYW1lICs9IFwiIG5vdHJhbnNpdGlvblwiO1xuICAgICAgfVxuXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllclwiKS5jbGFzc05hbWUgKz0gXCIgbm90cmFuc2l0aW9uXCI7XG5cbiAgICAgIGp3cGxheWVyKCkub25QbGF5bGlzdENvbXBsZXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb25QbGF5bGlzdENvbXBsZXRlKCk7XG4gICAgICB9KTtcblxuICAgICAgandwbGF5ZXIoKS5vblBsYXkoZnVuY3Rpb24gKCkge1xuICAgICAgICBvblBsYXkoKTtcbiAgICAgIH0pO1xuXG4gICAgICBqd3BsYXllcigpLm9uRXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIG9uUGxheWVyRXJyb3IoZXJyb3IpO1xuICAgICAgfSk7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBuZWVkIHRvIHRlc3QgaWYgdGhlcmUgaXMgYW4gZXJyb3IgcGxheWluZyBmaXJzdCB2aWRlb1xuICAgICAgICBqd3BsYXllcigpLnBsYXkoKTtcbiAgICAgIH0sIDIwMCk7XG5cbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLnBsYXkgPSBmdW5jdGlvbigpIHtcbiAgICB2aWV3ZXJQYXVzZWQgPSBmYWxzZTtcblxuICAgIGlmIChhdXRvUGxheSkge1xuICAgICAgaWYgKGNvbnRyb2xzICYmICFqd3BsYXllcigpLmdldENvbnRyb2xzKCkpIHtcbiAgICAgICAgLy8gV2lsbCBiZSBmaXJzdCB0aW1lIHBsYXllciBpcyBiZWluZyB0b2xkIHRvIHBsYXkgc28gZG9pbmcgdGhpcyBoZXJlIGFuZCBub3QgaW4gc2V0dXAgc28gdGhhdCBjb250cm9sc1xuICAgICAgICAvLyBhcmVuJ3QgdmlzaWJsZSB1cG9uIHBsYXlpbmcgZm9yIHRoZSBmaXJzdCB0aW1lLlxuICAgICAgICBqd3BsYXllcigpLnNldENvbnRyb2xzKHRydWUpO1xuICAgICAgfVxuXG4gICAgICBqd3BsYXllcigpLnBsYXkoKTtcblxuICAgICAgaWYgKGNvbnRyb2xzKSB7XG4gICAgICAgIC8vIHdvcmthcm91bmQgZm9yIGNvbnRyb2xzIHJlbWFpbmluZyB2aXNpYmxlLCB0dXJuIHRoZW0gb2ZmIGFuZCBvbiBhZ2FpblxuICAgICAgICBqd3BsYXllcigpLnNldENvbnRyb2xzKGZhbHNlKTtcbiAgICAgICAgandwbGF5ZXIoKS5zZXRDb250cm9scyh0cnVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfTtcblxuICB0aGlzLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gICAgdmlld2VyUGF1c2VkID0gdHJ1ZTtcbiAgICBjbGVhclRpbWVvdXQocGF1c2VUaW1lcik7XG4gICAgandwbGF5ZXIoKS5wYXVzZSgpO1xuICB9O1xuXG4gIHRoaXMuc3RvcCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucGF1c2UoKTtcbiAgfTtcblxuICB0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZpZXdlclBhdXNlZCA9IGZhbHNlO1xuICAgIGNsZWFyVGltZW91dChwYXVzZVRpbWVyKTtcbiAgICBwYXVzZVRpbWVyID0gbnVsbDtcbiAgICBqd3BsYXllcigpLnJlbW92ZSgpO1xuICB9O1xuXG4gIHRoaXMuZ2V0Q3VycmVudEluZGV4ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGp3cGxheWVyKCkuZ2V0UGxheWxpc3RJbmRleCgpO1xuICB9O1xuXG4gIHRoaXMuZ2V0RHVyYXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGp3cGxheWVyKCkuZ2V0RHVyYXRpb24oKTtcbiAgfTtcblxuICB0aGlzLmdldFBvc2l0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBqd3BsYXllcigpLmdldFBvc2l0aW9uKCk7XG4gIH1cblxufVxuXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=