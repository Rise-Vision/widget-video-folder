function init(e,n,a){window.oncontextmenu=function(){return!1},width=e.width,height=e.height,skin=a,volume=e.video.volume,autoPlay=e.video.autoplay,scaleToFit=e.video.scaleToFit,pauseDuration=e.pause,files=n,player=new PlayerJW,player.loadVideo()}function doneEvent(){parent.RiseVision.VideoFolder.playerEnded()}function readyEvent(){parent.RiseVision.VideoFolder.playerReady()}function errorEvent(e){parent.RiseVision.VideoFolder.playerError(e)}function play(){player.play()}function pause(){player.pause()}function stop(){player.stop()}function remove(){player.remove()}function PlayerJW(){function e(e){var n,a=[".mp4",".webm",".ogg",".ogv"],t=e.toLowerCase(),i=null;for(n=0;n<=a.length;n+=1)if(-1!==t.indexOf(a[n])){i=a[n].substr(a[n].lastIndexOf(".")+1);break}return"ogv"===i&&(i="ogg"),i}function n(){for(var n=[],a=0;a<files.length;a+=1)n.push({sources:[{file:files[a],type:e(files[a])}]});return n}function a(){doneEvent()}function t(){isLoading?(isLoading=!1,jwplayer().pause(),jwplayer().setMute(!1),jwplayer().setVolume(volume),readyEvent()):(pauseHandlerOn||(pauseHandlerOn=!0,jwplayer().onPause(function(){i()})),clearTimeout(pauseTimer))}function i(){viewerPaused||isLoading||(clearTimeout(pauseTimer),pauseTimer=setTimeout(function(){jwplayer().play(),jwplayer().setControls(!1),jwplayer().setControls(!0)},1e3*pauseDuration))}function o(e){e&&errorEvent({type:"video",index:jwplayer().getPlaylistIndex(),message:e.message})}function r(e){e&&errorEvent({type:"setup",index:0,message:e.message})}this.loadVideo=function(){jwplayer("player").setup({playlist:n(),width:width,height:height,controls:!autoPlay,stretching:scaleToFit?"uniform":"none",skin:skin}),jwplayer().onSetupError(function(e){r(e)}),jwplayer().onReady(function(){var e,n=document.getElementById("player").getElementsByTagName("*"),i=n.length;for(e=0;i>e;e+=1)n[e].className+=" notransition";document.getElementById("player").className+=" notransition",jwplayer().onPlaylistComplete(function(){a()}),jwplayer().onPlay(function(){t()}),jwplayer().onError(function(e){o(e)}),setTimeout(function(){jwplayer().play()},200)})},this.play=function(){viewerPaused=!1,autoPlay&&jwplayer().play()},this.pause=function(){viewerPaused=!0,clearTimeout(pauseTimer),jwplayer().pause()},this.stop=function(){this.pause()},this.remove=function(){viewerPaused=!1,clearTimeout(pauseTimer),pauseTimer=null,jwplayer().remove()}}var files,volume,autoPlay,scaleToFit,pauseDuration,width,height,skin,isLoading=!0,pauseHandlerOn=!1,viewerPaused=!1,pauseTimer=null,player=null;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3BsYXllci5taW4uanMiXSwibmFtZXMiOlsiaW5pdCIsInBhcmFtcyIsImxpc3QiLCJza2luVmFsIiwid2luZG93Iiwib25jb250ZXh0bWVudSIsIndpZHRoIiwiaGVpZ2h0Iiwic2tpbiIsInZvbHVtZSIsInZpZGVvIiwiYXV0b1BsYXkiLCJhdXRvcGxheSIsInNjYWxlVG9GaXQiLCJwYXVzZUR1cmF0aW9uIiwicGF1c2UiLCJmaWxlcyIsInBsYXllciIsIlBsYXllckpXIiwibG9hZFZpZGVvIiwiZG9uZUV2ZW50IiwicGFyZW50IiwiUmlzZVZpc2lvbiIsIlZpZGVvRm9sZGVyIiwicGxheWVyRW5kZWQiLCJyZWFkeUV2ZW50IiwicGxheWVyUmVhZHkiLCJlcnJvckV2ZW50IiwiZGF0YSIsInBsYXllckVycm9yIiwicGxheSIsInN0b3AiLCJyZW1vdmUiLCJnZXRWaWRlb0ZpbGVUeXBlIiwidXJsIiwiaSIsImV4dGVuc2lvbnMiLCJ1cmxMb3dlcmNhc2UiLCJ0b0xvd2VyQ2FzZSIsInR5cGUiLCJsZW5ndGgiLCJpbmRleE9mIiwic3Vic3RyIiwibGFzdEluZGV4T2YiLCJnZXRQbGF5bGlzdCIsInBsYXlsaXN0IiwicHVzaCIsInNvdXJjZXMiLCJmaWxlIiwib25QbGF5bGlzdENvbXBsZXRlIiwib25QbGF5IiwiaXNMb2FkaW5nIiwiandwbGF5ZXIiLCJzZXRNdXRlIiwic2V0Vm9sdW1lIiwicGF1c2VIYW5kbGVyT24iLCJvblBhdXNlIiwiY2xlYXJUaW1lb3V0IiwicGF1c2VUaW1lciIsInZpZXdlclBhdXNlZCIsInNldFRpbWVvdXQiLCJzZXRDb250cm9scyIsIm9uUGxheWVyRXJyb3IiLCJlcnJvciIsImluZGV4IiwiZ2V0UGxheWxpc3RJbmRleCIsIm1lc3NhZ2UiLCJvblNldHVwRXJyb3IiLCJ0aGlzIiwic2V0dXAiLCJjb250cm9scyIsInN0cmV0Y2hpbmciLCJvblJlYWR5IiwiZWxlbWVudHMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlk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QVcyQixRQUFRLFNBQVVoQixHQUMzQkQsRUFBY0MsS0FHaEJILFdBQVcsV0FFVFIsV0FBV3RCLFFBQ1YsUUFLUHNDLEtBQUt0QyxLQUFPLFdBQ1Y2QixjQUFlLEVBQ1hoRCxVQUNGeUMsV0FBV3RCLFFBSWZzQyxLQUFLckQsTUFBUSxXQUNYNEMsY0FBZSxFQUNmRixhQUFhQyxZQUNiTixXQUFXckMsU0FHYnFELEtBQUtyQyxLQUFPLFdBQ1ZxQyxLQUFLckQsU0FHUHFELEtBQUtwQyxPQUFTLFdBQ1oyQixjQUFlLEVBQ2ZGLGFBQWFDLFlBQ2JBLFdBQWEsS0FDYk4sV0FBV3BCLFVBbk9mLEdBQUloQixPQUNBUCxPQUFRRSxTQUFVRSxXQUFZQyxjQUM5QlIsTUFBT0MsT0FBUUMsS0FFZjJDLFdBQVksRUFDZEksZ0JBQWlCLEVBRWZJLGNBQWUsRUFDZkQsV0FBYSxLQUViekMsT0FBUyIsImZpbGUiOiJqcy9wbGF5ZXIubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGZpbGVzO1xudmFyIHZvbHVtZSwgYXV0b1BsYXksIHNjYWxlVG9GaXQsIHBhdXNlRHVyYXRpb247XG52YXIgd2lkdGgsIGhlaWdodCwgc2tpbjtcblxudmFyIGlzTG9hZGluZyA9IHRydWUsXG4gIHBhdXNlSGFuZGxlck9uID0gZmFsc2U7XG5cbnZhciB2aWV3ZXJQYXVzZWQgPSBmYWxzZTtcbnZhciBwYXVzZVRpbWVyID0gbnVsbDtcblxudmFyIHBsYXllciA9IG51bGw7XG5cbmZ1bmN0aW9uIGluaXQocGFyYW1zLCBsaXN0LCBza2luVmFsKSB7XG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9O1xuXG4gIHdpZHRoID0gcGFyYW1zLndpZHRoO1xuICBoZWlnaHQgPSBwYXJhbXMuaGVpZ2h0O1xuICBza2luID0gc2tpblZhbDtcbiAgdm9sdW1lID0gcGFyYW1zLnZpZGVvLnZvbHVtZTtcbiAgYXV0b1BsYXkgPSBwYXJhbXMudmlkZW8uYXV0b3BsYXk7XG4gIHNjYWxlVG9GaXQgPSBwYXJhbXMudmlkZW8uc2NhbGVUb0ZpdDtcbiAgcGF1c2VEdXJhdGlvbiA9IHBhcmFtcy5wYXVzZTtcbiAgZmlsZXMgPSBsaXN0O1xuXG4gIHBsYXllciA9IG5ldyBQbGF5ZXJKVygpO1xuICBwbGF5ZXIubG9hZFZpZGVvKCk7XG59XG5cbmZ1bmN0aW9uIGRvbmVFdmVudCgpIHtcbiAgcGFyZW50LlJpc2VWaXNpb24uVmlkZW9Gb2xkZXIucGxheWVyRW5kZWQoKTtcbn1cblxuZnVuY3Rpb24gcmVhZHlFdmVudCgpIHtcbiAgcGFyZW50LlJpc2VWaXNpb24uVmlkZW9Gb2xkZXIucGxheWVyUmVhZHkoKTtcbn1cblxuZnVuY3Rpb24gZXJyb3JFdmVudChkYXRhKSB7XG4gIHBhcmVudC5SaXNlVmlzaW9uLlZpZGVvRm9sZGVyLnBsYXllckVycm9yKGRhdGEpO1xufVxuXG5mdW5jdGlvbiBwbGF5KCkge1xuICBwbGF5ZXIucGxheSgpO1xufVxuXG5mdW5jdGlvbiBwYXVzZSgpIHtcbiAgcGxheWVyLnBhdXNlKCk7XG59XG5cbmZ1bmN0aW9uIHN0b3AoKSB7XG4gIHBsYXllci5zdG9wKCk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZSgpIHtcbiAgcGxheWVyLnJlbW92ZSgpO1xufVxuXG5mdW5jdGlvbiBQbGF5ZXJKVygpIHtcbiAgZnVuY3Rpb24gZ2V0VmlkZW9GaWxlVHlwZSh1cmwpIHtcbiAgICB2YXIgZXh0ZW5zaW9ucyA9IFtcIi5tcDRcIiwgXCIud2VibVwiLCBcIi5vZ2dcIiwgXCIub2d2XCJdLFxuICAgICAgdXJsTG93ZXJjYXNlID0gdXJsLnRvTG93ZXJDYXNlKCksXG4gICAgICB0eXBlID0gbnVsbCxcbiAgICAgIGk7XG5cbiAgICBmb3IgKGkgPSAwOyBpIDw9IGV4dGVuc2lvbnMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIGlmICh1cmxMb3dlcmNhc2UuaW5kZXhPZihleHRlbnNpb25zW2ldKSAhPT0gLTEpIHtcbiAgICAgICAgdHlwZSA9IGV4dGVuc2lvbnNbaV0uc3Vic3RyKGV4dGVuc2lvbnNbaV0ubGFzdEluZGV4T2YoXCIuXCIpICsgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlID09PSBcIm9ndlwiKSB7XG4gICAgICB0eXBlID0gXCJvZ2dcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gdHlwZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFBsYXlsaXN0KCkge1xuICAgIHZhciBwbGF5bGlzdCA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBmaWxlcy5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgcGxheWxpc3QucHVzaCh7XG4gICAgICAgIHNvdXJjZXM6IFt7XG4gICAgICAgICAgZmlsZTogZmlsZXNbaV0sXG4gICAgICAgICAgdHlwZTogZ2V0VmlkZW9GaWxlVHlwZShmaWxlc1tpXSlcbiAgICAgICAgfV1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBwbGF5bGlzdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUGxheWxpc3RDb21wbGV0ZSgpIHtcbiAgICBkb25lRXZlbnQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUGxheSgpIHtcbiAgICBpZiAoaXNMb2FkaW5nKSB7XG4gICAgICBpc0xvYWRpbmcgPSBmYWxzZTtcblxuICAgICAgandwbGF5ZXIoKS5wYXVzZSgpO1xuICAgICAgandwbGF5ZXIoKS5zZXRNdXRlKGZhbHNlKTtcbiAgICAgIGp3cGxheWVyKCkuc2V0Vm9sdW1lKHZvbHVtZSk7XG5cbiAgICAgIHJlYWR5RXZlbnQoKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXBhdXNlSGFuZGxlck9uKSB7XG4gICAgICAgIHBhdXNlSGFuZGxlck9uID0gdHJ1ZTtcblxuICAgICAgICAvLyBub3cgZGVmaW5lIHBhdXNlIGhhbmRsZXJcbiAgICAgICAgandwbGF5ZXIoKS5vblBhdXNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBvblBhdXNlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjbGVhclRpbWVvdXQocGF1c2VUaW1lcik7XG4gICAgfVxuXG4gIH1cblxuICBmdW5jdGlvbiBvblBhdXNlKCkge1xuICAgIGlmICghdmlld2VyUGF1c2VkICYmICFpc0xvYWRpbmcpIHtcbiAgICAgIC8vIHVzZXIgaGFzIHBhdXNlZCwgc2V0IGEgdGltZXIgdG8gcGxheSBhZ2FpblxuICAgICAgY2xlYXJUaW1lb3V0KHBhdXNlVGltZXIpO1xuXG4gICAgICBwYXVzZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gY29udGludWUgcGxheWluZyB0aGUgY3VycmVudCB2aWRlb1xuICAgICAgICBqd3BsYXllcigpLnBsYXkoKTtcblxuICAgICAgICAvLyB3b3JrYXJvdW5kIGZvciBjb250cm9scyByZW1haW5pbmcgdmlzaWJsZSwgdHVybiB0aGVtIG9mZiBhbmQgb24gYWdhaW5cbiAgICAgICAgandwbGF5ZXIoKS5zZXRDb250cm9scyhmYWxzZSk7XG4gICAgICAgIGp3cGxheWVyKCkuc2V0Q29udHJvbHModHJ1ZSk7XG5cbiAgICAgIH0sIHBhdXNlRHVyYXRpb24gKiAxMDAwKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblBsYXllckVycm9yKGVycm9yKSB7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBlcnJvckV2ZW50KHtcbiAgICAgICAgdHlwZTogXCJ2aWRlb1wiLFxuICAgICAgICBpbmRleDogandwbGF5ZXIoKS5nZXRQbGF5bGlzdEluZGV4KCksXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG9uU2V0dXBFcnJvcihlcnJvcikge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgZXJyb3JFdmVudCh7XG4gICAgICAgIHR5cGU6IFwic2V0dXBcIixcbiAgICAgICAgaW5kZXg6IDAsXG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2VcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMubG9hZFZpZGVvID0gZnVuY3Rpb24oKSB7XG4gICAgandwbGF5ZXIoXCJwbGF5ZXJcIikuc2V0dXAoe1xuICAgICAgcGxheWxpc3Q6IGdldFBsYXlsaXN0KCksXG4gICAgICB3aWR0aCA6IHdpZHRoLFxuICAgICAgaGVpZ2h0IDogaGVpZ2h0LFxuICAgICAgY29udHJvbHM6ICFhdXRvUGxheSxcbiAgICAgIHN0cmV0Y2hpbmcgOiBzY2FsZVRvRml0ID8gXCJ1bmlmb3JtXCIgOiBcIm5vbmVcIixcbiAgICAgIHNraW46IHNraW5cbiAgICB9KTtcblxuICAgIGp3cGxheWVyKCkub25TZXR1cEVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgb25TZXR1cEVycm9yKGVycm9yKTtcbiAgICB9KTtcblxuICAgIGp3cGxheWVyKCkub25SZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllclwiKS5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIiksXG4gICAgICAgIHRvdGFsID0gZWxlbWVudHMubGVuZ3RoLFxuICAgICAgICBpO1xuXG4gICAgICAvLyBXb3JrYXJvdW5kIGZvciBDaHJvbWUgQXBwIFBsYXllciA8d2Vidmlldz4gbm90IGhhbmRsaW5nIENTUzMgdHJhbnNpdGlvblxuICAgICAgZm9yIChpID0gMDsgaSA8IHRvdGFsOyBpICs9IDEpIHtcbiAgICAgICAgZWxlbWVudHNbaV0uY2xhc3NOYW1lICs9IFwiIG5vdHJhbnNpdGlvblwiO1xuICAgICAgfVxuXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBsYXllclwiKS5jbGFzc05hbWUgKz0gXCIgbm90cmFuc2l0aW9uXCI7XG5cbiAgICAgIGp3cGxheWVyKCkub25QbGF5bGlzdENvbXBsZXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb25QbGF5bGlzdENvbXBsZXRlKCk7XG4gICAgICB9KTtcblxuICAgICAgandwbGF5ZXIoKS5vblBsYXkoZnVuY3Rpb24gKCkge1xuICAgICAgICBvblBsYXkoKTtcbiAgICAgIH0pO1xuXG4gICAgICBqd3BsYXllcigpLm9uRXJyb3IoZnVuY3Rpb24gKGVycm9yKSB7XG4gICAgICAgIG9uUGxheWVyRXJyb3IoZXJyb3IpO1xuICAgICAgfSk7XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyBuZWVkIHRvIHRlc3QgaWYgdGhlcmUgaXMgYW4gZXJyb3IgcGxheWluZyBmaXJzdCB2aWRlb1xuICAgICAgICBqd3BsYXllcigpLnBsYXkoKTtcbiAgICAgIH0sIDIwMCk7XG5cbiAgICB9KTtcbiAgfTtcblxuICB0aGlzLnBsYXkgPSBmdW5jdGlvbigpIHtcbiAgICB2aWV3ZXJQYXVzZWQgPSBmYWxzZTtcbiAgICBpZiAoYXV0b1BsYXkpIHtcbiAgICAgIGp3cGxheWVyKCkucGxheSgpO1xuICAgIH1cbiAgfTtcblxuICB0aGlzLnBhdXNlID0gZnVuY3Rpb24oKSB7XG4gICAgdmlld2VyUGF1c2VkID0gdHJ1ZTtcbiAgICBjbGVhclRpbWVvdXQocGF1c2VUaW1lcik7XG4gICAgandwbGF5ZXIoKS5wYXVzZSgpO1xuICB9O1xuXG4gIHRoaXMuc3RvcCA9IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMucGF1c2UoKTtcbiAgfTtcblxuICB0aGlzLnJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZpZXdlclBhdXNlZCA9IGZhbHNlO1xuICAgIGNsZWFyVGltZW91dChwYXVzZVRpbWVyKTtcbiAgICBwYXVzZVRpbWVyID0gbnVsbDtcbiAgICBqd3BsYXllcigpLnJlbW92ZSgpO1xuICB9O1xuXG59XG5cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==