function init(e,n,t){window.oncontextmenu=function(){return!1},width=e.width,height=e.height,skin=t,volume=e.video.volume,autoPlay=e.video.autoplay,scaleToFit=e.video.scaleToFit,pauseDuration=e.pause,files=n,player=new PlayerJW,player.loadVideo()}function doneEvent(){parent.RiseVision.VideoFolder.playerEnded()}function readyEvent(){parent.RiseVision.VideoFolder.playerReady()}function errorEvent(e){parent.RiseVision.VideoFolder.playerError(e)}function play(){player.play()}function pause(){player.pause()}function stop(){player.stop()}function remove(){player.remove()}function getPlaybackData(){return{total:files.length,index:player.getCurrentIndex(),duration:player.getDuration(),position:player.getPosition()}}function PlayerJW(){function e(e){var n,t=[".mp4",".webm",".ogg",".ogv"],i=e.toLowerCase(),a=null;for(n=0;n<=t.length;n+=1)if(-1!==i.indexOf(t[n])){a=t[n].substr(t[n].lastIndexOf(".")+1);break}return"ogv"===a&&(a="ogg"),a}function n(){for(var n=[],t=0;t<files.length;t+=1)n.push({sources:[{file:files[t],type:e(files[t])}]});return n}function t(){doneEvent()}function i(){isLoading?(isLoading=!1,jwplayer().pause(),jwplayer().setMute(!1),jwplayer().setVolume(volume),readyEvent()):(pauseHandlerOn||(pauseHandlerOn=!0,jwplayer().onPause(function(){a()})),clearTimeout(pauseTimer))}function a(){viewerPaused||isLoading||(clearTimeout(pauseTimer),pauseTimer=setTimeout(function(){jwplayer().play(),jwplayer().setControls(!1),jwplayer().setControls(!0)},1e3*pauseDuration))}function o(e){e&&errorEvent({type:"video",index:jwplayer().getPlaylistIndex(),message:e.message})}function r(e){e&&errorEvent({type:"setup",index:0,message:e.message})}this.loadVideo=function(){jwplayer("player").setup({playlist:n(),width:width,height:height,controls:!autoPlay,stretching:scaleToFit?"uniform":"none",skin:skin}),jwplayer().onSetupError(function(e){r(e)}),jwplayer().onReady(function(){var e,n=document.getElementById("player").getElementsByTagName("*"),a=n.length;for(e=0;a>e;e+=1)n[e].className+=" notransition";document.getElementById("player").className+=" notransition",jwplayer().onPlaylistComplete(function(){t()}),jwplayer().onPlay(function(){i()}),jwplayer().onError(function(e){o(e)}),setTimeout(function(){jwplayer().play()},200)})},this.play=function(){viewerPaused=!1,autoPlay&&jwplayer().play()},this.pause=function(){viewerPaused=!0,clearTimeout(pauseTimer),jwplayer().pause()},this.stop=function(){this.pause()},this.remove=function(){viewerPaused=!1,clearTimeout(pauseTimer),pauseTimer=null,jwplayer().remove()},this.getCurrentIndex=function(){return jwplayer().getPlaylistIndex()},this.getDuration=function(){return jwplayer().getDuration()},this.getPosition=function(){return jwplayer().getPosition()}}var files,volume,autoPlay,scaleToFit,pauseDuration,width,height,skin,isLoading=!0,pauseHandlerOn=!1,viewerPaused=!1,pauseTimer=null,player=null;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3BsYXllci5taW4uanMiXSwibmFtZXMiOlsiaW5pdCIsInBhcmFtcyIsImxpc3QiLCJza2luVmFsIiwid2luZG93Iiwib25jb250ZXh0bWVudSIsIndpZHRoIiwiaGVpZ2h0Iiwic2tpbiIsInZvbHVtZSIsInZpZGVvIiwiYXV0b1BsYXkiLCJhdXRvcGxheSIsInNjYWxlVG9GaXQiLCJwYXVzZUR1cmF0aW9uIiwicGF1c2UiLCJmaWxlcyIsInBsYXllciIsIlBsYXllckpXIiwibG9hZFZpZGVvIiwiZG9uZUV2ZW50IiwicGFyZW50IiwiUmlzZVZpc2lvbiIsIlZpZGVvRm9sZGVyIiwicGxheWVyRW5kZWQiLCJyZWFkeUV2ZW50IiwicGxheWVyUmVhZHkiLCJlcnJvckV2ZW50IiwiZGF0YSIsInBsYXllckVycm9yIiwicGxheSIsInN0b3AiLCJyZW1vdmUiLCJnZXRQbGF5YmFja0RhdGEiLCJ0b3RhbCIsImxlbmd0aCIsImluZGV4IiwiZ2V0Q3VycmVudEluZGV4IiwiZHVyYXRpb24iLCJnZXREdXJhdGlvbiIsInBvc2l0aW9uIiwiZ2V0UG9zaXRpb24iLCJnZXRWaWRlb0ZpbGVUeXBlIiwidXJsIiwiaSIsImV4dGVuc2lvbnMiLCJ1cmxMb3dlcmNhc2UiLCJ0b0xvd2VyQ2FzZSIsInR5cGUiLCJpbmRleE9mIiwic3Vic3RyIiwibGFzdEluZGV4T2YiLCJnZXRQbGF5bGlzdCIsInBsYXlsaXN0IiwicHVzaCIsInNvdXJjZXMiLCJmaWxlIiwib25QbGF5bGlzdENvbXBsZXRlIiwib25QbGF5IiwiaXNMb2FkaW5nIiwiandwbGF5ZXIiLCJzZXRNdXRlIiwic2V0Vm9sdW1lIiwicGF1c2VIYW5kbGVyT24iLCJvblBhdXNlIiwiY2xlYXJUaW1lb3V0IiwicGF1c2VUaW1lciIsInZpZXdlclBhdXNlZCIsInNldFRpbWVvdXQiLCJzZXRDb250cm9scyIsIm9uUGxheWVyRXJyb3IiLCJlcnJvciIsImdldFBsYXlsaXN0SW5kZXgiLCJtZXNzYWdlIiwib25TZXR1cEVycm9yIiwidGhpcyIsInNldHVwIiwiY29udHJvbHMiLCJzdHJldGNoaW5nIiwib25SZWFkeSIsImVsZW1lbnRzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiY2xhc3NOYW1lIiwib25FcnJvciJdLCJtYXBwaW5ncyI6IkFBWUEsUUFBU0EsTUFBS0MsRUFBUUMsRUFBTUMsR0FDMUJDLE9BQU9DLGNBQWdCLFdBQ3JCLE9BQU8sR0FHVEMsTUFBUUwsRUFBT0ssTUFDZkMsT0FBU04sRUFBT00sT0FDaEJDLEtBQU9MLEVBQ1BNLE9BQVNSLEVBQU9TLE1BQU1ELE9BQ3RCRSxTQUFXVixFQUFPUyxNQUFNRSxTQUN4QkMsV0FBYVosRUFBT1MsTUFBTUcsV0FDMUJDLGNBQWdCYixFQUFPYyxNQUN2QkMsTUFBUWQsRUFFUmUsT0FBUyxHQUFJQyxVQUNiRCxPQUFPRSxZQUdULFFBQVNDLGFBQ1BDLE9BQU9DLFdBQVdDLFlBQVlDLGNBR2hDLFFBQVNDLGNBQ1BKLE9BQU9DLFdBQVdDLFlBQVlHLGNBR2hDLFFBQVNDLFlBQVdDLEdBQ2xCUCxPQUFPQyxXQUFXQyxZQUFZTSxZQUFZRCxHQUc1QyxRQUFTRSxRQUNQYixPQUFPYSxPQUdULFFBQVNmLFNBQ1BFLE9BQU9GLFFBR1QsUUFBU2dCLFFBQ1BkLE9BQU9jLE9BR1QsUUFBU0MsVUFDUGYsT0FBT2UsU0FHVCxRQUFTQyxtQkFDUCxPQUNFQyxNQUFPbEIsTUFBTW1CLE9BQ2JDLE1BQU9uQixPQUFPb0Isa0JBQ2RDLFNBQVVyQixPQUFPc0IsY0FDakJDLFNBQVV2QixPQUFPd0IsZUFJckIsUUFBU3ZCLFlBQ1AsUUFBU3dCLEdBQWlCQyxHQUN4QixHQUdFQyxHQUhFQyxHQUFjLE9BQVEsUUFBUyxPQUFRLFFBQ3pDQyxFQUFlSCxFQUFJSSxjQUNuQkMsRUFBTyxJQUdULEtBQUtKLEVBQUksRUFBR0EsR0FBS0MsRUFBV1YsT0FBUVMsR0FBSyxFQUN2QyxHQUE0QyxLQUF4Q0UsRUFBYUcsUUFBUUosRUFBV0QsSUFBWSxDQUM5Q0ksRUFBT0gsRUFBV0QsR0FBR00sT0FBT0wsRUFBV0QsR0FBR08sWUFBWSxLQUFPLEVBQzdELE9BUUosTUFKYSxRQUFUSCxJQUNGQSxFQUFPLE9BR0ZBLEVBR1QsUUFBU0ksS0FHUCxJQUFLLEdBRkRDLE1BRUtULEVBQUksRUFBR0EsRUFBSTVCLE1BQU1tQixPQUFRUyxHQUFLLEVBQ3JDUyxFQUFTQyxNQUNQQyxVQUNFQyxLQUFNeEMsTUFBTTRCLEdBQ1pJLEtBQU1OLEVBQWlCMUIsTUFBTTRCLE9BS25DLE9BQU9TLEdBR1QsUUFBU0ksS0FDUHJDLFlBR0YsUUFBU3NDLEtBQ0hDLFdBQ0ZBLFdBQVksRUFFWkMsV0FBVzdDLFFBQ1g2QyxXQUFXQyxTQUFRLEdBQ25CRCxXQUFXRSxVQUFVckQsUUFFckJnQixlQUdLc0MsaUJBQ0hBLGdCQUFpQixFQUdqQkgsV0FBV0ksUUFBUSxXQUNqQkEsT0FJSkMsYUFBYUMsYUFLakIsUUFBU0YsS0FDRkcsY0FBaUJSLFlBRXBCTSxhQUFhQyxZQUViQSxXQUFhRSxXQUFXLFdBRXRCUixXQUFXOUIsT0FHWDhCLFdBQVdTLGFBQVksR0FDdkJULFdBQVdTLGFBQVksSUFFTixJQUFoQnZELGdCQUlQLFFBQVN3RCxHQUFjQyxHQUNqQkEsR0FDRjVDLFlBQ0VxQixLQUFNLFFBQ05aLE1BQU93QixXQUFXWSxtQkFDbEJDLFFBQVNGLEVBQU1FLFVBS3JCLFFBQVNDLEdBQWFILEdBQ2hCQSxHQUNGNUMsWUFDRXFCLEtBQU0sUUFDTlosTUFBTyxFQUNQcUMsUUFBU0YsRUFBTUUsVUFLckJFLEtBQUt4RCxVQUFZLFdBQ2Z5QyxTQUFTLFVBQVVnQixPQUNqQnZCLFNBQVVELElBQ1Y5QyxNQUFRQSxNQUNSQyxPQUFTQSxPQUNUc0UsVUFBV2xFLFNBQ1htRSxXQUFhakUsV0FBYSxVQUFZLE9BQ3RDTCxLQUFNQSxPQUdSb0QsV0FBV2MsYUFBYSxTQUFVSCxHQUNoQ0csRUFBYUgsS0FHZlgsV0FBV21CLFFBQVEsV0FDakIsR0FFRW5DLEdBRkVvQyxFQUFXQyxTQUFTQyxlQUFlLFVBQVVDLHFCQUFxQixLQUNwRWpELEVBQVE4QyxFQUFTN0MsTUFJbkIsS0FBS1MsRUFBSSxFQUFPVixFQUFKVSxFQUFXQSxHQUFLLEVBQzFCb0MsRUFBU3BDLEdBQUd3QyxXQUFhLGVBRzNCSCxVQUFTQyxlQUFlLFVBQVVFLFdBQWEsZ0JBRS9DeEIsV0FBV0gsbUJBQW1CLFdBQzVCQSxNQUdGRyxXQUFXRixPQUFPLFdBQ2hCQSxNQUdGRSxXQUFXeUIsUUFBUSxTQUFVZCxHQUMzQkQsRUFBY0MsS0FHaEJILFdBQVcsV0FFVFIsV0FBVzlCLFFBQ1YsUUFLUDZDLEtBQUs3QyxLQUFPLFdBQ1ZxQyxjQUFlLEVBQ1h4RCxVQUNGaUQsV0FBVzlCLFFBSWY2QyxLQUFLNUQsTUFBUSxXQUNYb0QsY0FBZSxFQUNmRixhQUFhQyxZQUNiTixXQUFXN0MsU0FHYjRELEtBQUs1QyxLQUFPLFdBQ1Y0QyxLQUFLNUQsU0FHUDRELEtBQUszQyxPQUFTLFdBQ1ptQyxjQUFlLEVBQ2ZGLGFBQWFDLFlBQ2JBLFdBQWEsS0FDYk4sV0FBVzVCLFVBR2IyQyxLQUFLdEMsZ0JBQWtCLFdBQ3JCLE1BQU91QixZQUFXWSxvQkFHcEJHLEtBQUtwQyxZQUFjLFdBQ2pCLE1BQU9xQixZQUFXckIsZUFHcEJvQyxLQUFLbEMsWUFBYyxXQUNqQixNQUFPbUIsWUFBV25CLGVBeFB0QixHQUFJekIsT0FDQVAsT0FBUUUsU0FBVUUsV0FBWUMsY0FDOUJSLE1BQU9DLE9BQVFDLEtBRWZtRCxXQUFZLEVBQ2RJLGdCQUFpQixFQUVmSSxjQUFlLEVBQ2ZELFdBQWEsS0FFYmpELE9BQVMiLCJmaWxlIjoianMvcGxheWVyLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBmaWxlcztcbnZhciB2b2x1bWUsIGF1dG9QbGF5LCBzY2FsZVRvRml0LCBwYXVzZUR1cmF0aW9uO1xudmFyIHdpZHRoLCBoZWlnaHQsIHNraW47XG5cbnZhciBpc0xvYWRpbmcgPSB0cnVlLFxuICBwYXVzZUhhbmRsZXJPbiA9IGZhbHNlO1xuXG52YXIgdmlld2VyUGF1c2VkID0gZmFsc2U7XG52YXIgcGF1c2VUaW1lciA9IG51bGw7XG5cbnZhciBwbGF5ZXIgPSBudWxsO1xuXG5mdW5jdGlvbiBpbml0KHBhcmFtcywgbGlzdCwgc2tpblZhbCkge1xuICB3aW5kb3cub25jb250ZXh0bWVudSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICB3aWR0aCA9IHBhcmFtcy53aWR0aDtcbiAgaGVpZ2h0ID0gcGFyYW1zLmhlaWdodDtcbiAgc2tpbiA9IHNraW5WYWw7XG4gIHZvbHVtZSA9IHBhcmFtcy52aWRlby52b2x1bWU7XG4gIGF1dG9QbGF5ID0gcGFyYW1zLnZpZGVvLmF1dG9wbGF5O1xuICBzY2FsZVRvRml0ID0gcGFyYW1zLnZpZGVvLnNjYWxlVG9GaXQ7XG4gIHBhdXNlRHVyYXRpb24gPSBwYXJhbXMucGF1c2U7XG4gIGZpbGVzID0gbGlzdDtcblxuICBwbGF5ZXIgPSBuZXcgUGxheWVySlcoKTtcbiAgcGxheWVyLmxvYWRWaWRlbygpO1xufVxuXG5mdW5jdGlvbiBkb25lRXZlbnQoKSB7XG4gIHBhcmVudC5SaXNlVmlzaW9uLlZpZGVvRm9sZGVyLnBsYXllckVuZGVkKCk7XG59XG5cbmZ1bmN0aW9uIHJlYWR5RXZlbnQoKSB7XG4gIHBhcmVudC5SaXNlVmlzaW9uLlZpZGVvRm9sZGVyLnBsYXllclJlYWR5KCk7XG59XG5cbmZ1bmN0aW9uIGVycm9yRXZlbnQoZGF0YSkge1xuICBwYXJlbnQuUmlzZVZpc2lvbi5WaWRlb0ZvbGRlci5wbGF5ZXJFcnJvcihkYXRhKTtcbn1cblxuZnVuY3Rpb24gcGxheSgpIHtcbiAgcGxheWVyLnBsYXkoKTtcbn1cblxuZnVuY3Rpb24gcGF1c2UoKSB7XG4gIHBsYXllci5wYXVzZSgpO1xufVxuXG5mdW5jdGlvbiBzdG9wKCkge1xuICBwbGF5ZXIuc3RvcCgpO1xufVxuXG5mdW5jdGlvbiByZW1vdmUoKSB7XG4gIHBsYXllci5yZW1vdmUoKTtcbn1cblxuZnVuY3Rpb24gZ2V0UGxheWJhY2tEYXRhKCkge1xuICByZXR1cm4ge1xuICAgIHRvdGFsOiBmaWxlcy5sZW5ndGgsXG4gICAgaW5kZXg6IHBsYXllci5nZXRDdXJyZW50SW5kZXgoKSxcbiAgICBkdXJhdGlvbjogcGxheWVyLmdldER1cmF0aW9uKCksXG4gICAgcG9zaXRpb246IHBsYXllci5nZXRQb3NpdGlvbigpXG4gIH1cbn1cblxuZnVuY3Rpb24gUGxheWVySlcoKSB7XG4gIGZ1bmN0aW9uIGdldFZpZGVvRmlsZVR5cGUodXJsKSB7XG4gICAgdmFyIGV4dGVuc2lvbnMgPSBbXCIubXA0XCIsIFwiLndlYm1cIiwgXCIub2dnXCIsIFwiLm9ndlwiXSxcbiAgICAgIHVybExvd2VyY2FzZSA9IHVybC50b0xvd2VyQ2FzZSgpLFxuICAgICAgdHlwZSA9IG51bGwsXG4gICAgICBpO1xuXG4gICAgZm9yIChpID0gMDsgaSA8PSBleHRlbnNpb25zLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBpZiAodXJsTG93ZXJjYXNlLmluZGV4T2YoZXh0ZW5zaW9uc1tpXSkgIT09IC0xKSB7XG4gICAgICAgIHR5cGUgPSBleHRlbnNpb25zW2ldLnN1YnN0cihleHRlbnNpb25zW2ldLmxhc3RJbmRleE9mKFwiLlwiKSArIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHlwZSA9PT0gXCJvZ3ZcIikge1xuICAgICAgdHlwZSA9IFwib2dnXCI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHR5cGU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRQbGF5bGlzdCgpIHtcbiAgICB2YXIgcGxheWxpc3QgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICAgIHBsYXlsaXN0LnB1c2goe1xuICAgICAgICBzb3VyY2VzOiBbe1xuICAgICAgICAgIGZpbGU6IGZpbGVzW2ldLFxuICAgICAgICAgIHR5cGU6IGdldFZpZGVvRmlsZVR5cGUoZmlsZXNbaV0pXG4gICAgICAgIH1dXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGxheWxpc3Q7XG4gIH1cblxuICBmdW5jdGlvbiBvblBsYXlsaXN0Q29tcGxldGUoKSB7XG4gICAgZG9uZUV2ZW50KCk7XG4gIH1cblxuICBmdW5jdGlvbiBvblBsYXkoKSB7XG4gICAgaWYgKGlzTG9hZGluZykge1xuICAgICAgaXNMb2FkaW5nID0gZmFsc2U7XG5cbiAgICAgIGp3cGxheWVyKCkucGF1c2UoKTtcbiAgICAgIGp3cGxheWVyKCkuc2V0TXV0ZShmYWxzZSk7XG4gICAgICBqd3BsYXllcigpLnNldFZvbHVtZSh2b2x1bWUpO1xuXG4gICAgICByZWFkeUV2ZW50KCk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKCFwYXVzZUhhbmRsZXJPbikge1xuICAgICAgICBwYXVzZUhhbmRsZXJPbiA9IHRydWU7XG5cbiAgICAgICAgLy8gbm93IGRlZmluZSBwYXVzZSBoYW5kbGVyXG4gICAgICAgIGp3cGxheWVyKCkub25QYXVzZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgb25QYXVzZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY2xlYXJUaW1lb3V0KHBhdXNlVGltZXIpO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gb25QYXVzZSgpIHtcbiAgICBpZiAoIXZpZXdlclBhdXNlZCAmJiAhaXNMb2FkaW5nKSB7XG4gICAgICAvLyB1c2VyIGhhcyBwYXVzZWQsIHNldCBhIHRpbWVyIHRvIHBsYXkgYWdhaW5cbiAgICAgIGNsZWFyVGltZW91dChwYXVzZVRpbWVyKTtcblxuICAgICAgcGF1c2VUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIGNvbnRpbnVlIHBsYXlpbmcgdGhlIGN1cnJlbnQgdmlkZW9cbiAgICAgICAgandwbGF5ZXIoKS5wbGF5KCk7XG5cbiAgICAgICAgLy8gd29ya2Fyb3VuZCBmb3IgY29udHJvbHMgcmVtYWluaW5nIHZpc2libGUsIHR1cm4gdGhlbSBvZmYgYW5kIG9uIGFnYWluXG4gICAgICAgIGp3cGxheWVyKCkuc2V0Q29udHJvbHMoZmFsc2UpO1xuICAgICAgICBqd3BsYXllcigpLnNldENvbnRyb2xzKHRydWUpO1xuXG4gICAgICB9LCBwYXVzZUR1cmF0aW9uICogMTAwMCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb25QbGF5ZXJFcnJvcihlcnJvcikge1xuICAgIGlmIChlcnJvcikge1xuICAgICAgZXJyb3JFdmVudCh7XG4gICAgICAgIHR5cGU6IFwidmlkZW9cIixcbiAgICAgICAgaW5kZXg6IGp3cGxheWVyKCkuZ2V0UGxheWxpc3RJbmRleCgpLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvblNldHVwRXJyb3IoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGVycm9yRXZlbnQoe1xuICAgICAgICB0eXBlOiBcInNldHVwXCIsXG4gICAgICAgIGluZGV4OiAwLFxuICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICB0aGlzLmxvYWRWaWRlbyA9IGZ1bmN0aW9uKCkge1xuICAgIGp3cGxheWVyKFwicGxheWVyXCIpLnNldHVwKHtcbiAgICAgIHBsYXlsaXN0OiBnZXRQbGF5bGlzdCgpLFxuICAgICAgd2lkdGggOiB3aWR0aCxcbiAgICAgIGhlaWdodCA6IGhlaWdodCxcbiAgICAgIGNvbnRyb2xzOiAhYXV0b1BsYXksXG4gICAgICBzdHJldGNoaW5nIDogc2NhbGVUb0ZpdCA/IFwidW5pZm9ybVwiIDogXCJub25lXCIsXG4gICAgICBza2luOiBza2luXG4gICAgfSk7XG5cbiAgICBqd3BsYXllcigpLm9uU2V0dXBFcnJvcihmdW5jdGlvbiAoZXJyb3IpIHtcbiAgICAgIG9uU2V0dXBFcnJvcihlcnJvcik7XG4gICAgfSk7XG5cbiAgICBqd3BsYXllcigpLm9uUmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXJcIikuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCIqXCIpLFxuICAgICAgICB0b3RhbCA9IGVsZW1lbnRzLmxlbmd0aCxcbiAgICAgICAgaTtcblxuICAgICAgLy8gV29ya2Fyb3VuZCBmb3IgQ2hyb21lIEFwcCBQbGF5ZXIgPHdlYnZpZXc+IG5vdCBoYW5kbGluZyBDU1MzIHRyYW5zaXRpb25cbiAgICAgIGZvciAoaSA9IDA7IGkgPCB0b3RhbDsgaSArPSAxKSB7XG4gICAgICAgIGVsZW1lbnRzW2ldLmNsYXNzTmFtZSArPSBcIiBub3RyYW5zaXRpb25cIjtcbiAgICAgIH1cblxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwbGF5ZXJcIikuY2xhc3NOYW1lICs9IFwiIG5vdHJhbnNpdGlvblwiO1xuXG4gICAgICBqd3BsYXllcigpLm9uUGxheWxpc3RDb21wbGV0ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9uUGxheWxpc3RDb21wbGV0ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGp3cGxheWVyKCkub25QbGF5KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgb25QbGF5KCk7XG4gICAgICB9KTtcblxuICAgICAgandwbGF5ZXIoKS5vbkVycm9yKGZ1bmN0aW9uIChlcnJvcikge1xuICAgICAgICBvblBsYXllckVycm9yKGVycm9yKTtcbiAgICAgIH0pO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gbmVlZCB0byB0ZXN0IGlmIHRoZXJlIGlzIGFuIGVycm9yIHBsYXlpbmcgZmlyc3QgdmlkZW9cbiAgICAgICAgandwbGF5ZXIoKS5wbGF5KCk7XG4gICAgICB9LCAyMDApO1xuXG4gICAgfSk7XG4gIH07XG5cbiAgdGhpcy5wbGF5ID0gZnVuY3Rpb24oKSB7XG4gICAgdmlld2VyUGF1c2VkID0gZmFsc2U7XG4gICAgaWYgKGF1dG9QbGF5KSB7XG4gICAgICBqd3BsYXllcigpLnBsYXkoKTtcbiAgICB9XG4gIH07XG5cbiAgdGhpcy5wYXVzZSA9IGZ1bmN0aW9uKCkge1xuICAgIHZpZXdlclBhdXNlZCA9IHRydWU7XG4gICAgY2xlYXJUaW1lb3V0KHBhdXNlVGltZXIpO1xuICAgIGp3cGxheWVyKCkucGF1c2UoKTtcbiAgfTtcblxuICB0aGlzLnN0b3AgPSBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnBhdXNlKCk7XG4gIH07XG5cbiAgdGhpcy5yZW1vdmUgPSBmdW5jdGlvbigpIHtcbiAgICB2aWV3ZXJQYXVzZWQgPSBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQocGF1c2VUaW1lcik7XG4gICAgcGF1c2VUaW1lciA9IG51bGw7XG4gICAgandwbGF5ZXIoKS5yZW1vdmUoKTtcbiAgfTtcblxuICB0aGlzLmdldEN1cnJlbnRJbmRleCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBqd3BsYXllcigpLmdldFBsYXlsaXN0SW5kZXgoKTtcbiAgfTtcblxuICB0aGlzLmdldER1cmF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBqd3BsYXllcigpLmdldER1cmF0aW9uKCk7XG4gIH07XG5cbiAgdGhpcy5nZXRQb3NpdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gandwbGF5ZXIoKS5nZXRQb3NpdGlvbigpO1xuICB9XG5cbn1cblxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9