if("undefined"==typeof config){var config={};"undefined"!=typeof angular&&(angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","components/rv-common-i18n/dist/locales/translation_").constant("LOCALES_SUFIX",".json"),angular.module("risevision.widget.common.storage-selector.config").value("STORAGE_MODAL","http://storage.risevision.com/~rvi/storage-client-rva-test/storage-modal.html#/files/"))}var RiseVision=RiseVision||{};RiseVision.VideoFolder={},RiseVision.VideoFolder=function(e,n){"use strict";function t(){n.rpc.call("","rsevent_ready",null,c.getString("id"),!0,!0,!0,!0,!0)}function o(){t()}function i(){}function r(){}function a(e){c=new n.Prefs,u=e,l=new RiseVision.Common.Background(u),l.init(o)}function s(){}var c=null,u={},l=null;return{pause:i,play:r,setAdditionalParams:a,stop:s}}(document,gadgets);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Background=function(e){"use strict";function n(){setTimeout(function(){c.style.backgroundImage="url("+e.background.image.url+d+"cb="+(new Date).getTime()+")",n()},l)}function t(){s=!0,e.background.useImage&&!g&&n(),a&&"function"==typeof a&&a()}function o(e){u.removeEventListener("rise-storage-response",o),c.style.backgroundImage=Array.isArray(e.detail)?"url("+e.detail[0]+")":"url("+e.detail+")",t()}function i(){var n;c=document.getElementById("background"),u=document.getElementById("backgroundStorage"),document.body.style.background=e.background.color,c?e.background.useImage?(c.className=e.background.image.position,c.className=e.background.image.scale?c.className+" scale-to-fit":c.className,g=0!==Object.keys(e.backgroundStorage).length,g?u?(u.addEventListener("rise-storage-response",o),u.setAttribute("folder",e.backgroundStorage.folder),u.setAttribute("fileName",e.backgroundStorage.fileName),u.setAttribute("companyId",e.backgroundStorage.companyId),u.go()):console.log("Missing element with id value of 'backgroundStorage'"):(n=e.background.image.url.split("?"),d=1===n.length?"?":"&",c.style.backgroundImage="url("+e.background.image.url+")",t())):t():console.log("Missing element with id value of 'background'")}function r(e){s?e&&"function"==typeof e&&e():(e&&(a=e),i())}var a=null,s=!1,c=null,u=null,l=9e5,g=!1,d="";return{init:r}},function(e,n){"use strict";function t(){}function o(){}function i(){}function r(e,n){Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(n)&&n.length>0&&RiseVision.VideoFolder.setAdditionalParams(JSON.parse(n[0]))}var a=new n.Prefs,s=a.getString("id");e.oncontextmenu=function(){return!1},s&&""!==s&&(n.rpc.register("rscmd_play_"+s,t),n.rpc.register("rscmd_pause_"+s,o),n.rpc.register("rscmd_stop_"+s,i),n.rpc.register("rsparam_set_"+s,r),n.rpc.call("","rsparam_get",null,s,["additionalParams"]))}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-4"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiY29uZmlnIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwidmFsdWUiLCJSaXNlVmlzaW9uIiwiVmlkZW9Gb2xkZXIiLCJkb2N1bWVudCIsImdhZGdldHMiLCJfcmVhZHkiLCJycGMiLCJjYWxsIiwiX3ByZWZzIiwiZ2V0U3RyaW5nIiwiX2JhY2tncm91bmRSZWFkeSIsInBhdXNlIiwicGxheSIsInNldEFkZGl0aW9uYWxQYXJhbXMiLCJwYXJhbXMiLCJQcmVmcyIsIl9hZGRpdGlvbmFsUGFyYW1zIiwiX2JhY2tncm91bmQiLCJDb21tb24iLCJCYWNrZ3JvdW5kIiwiaW5pdCIsInN0b3AiLCJkYXRhIiwiX3JlZnJlc2hUaW1lciIsInNldFRpbWVvdXQiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsImJhY2tncm91bmQiLCJpbWFnZSIsInVybCIsIl9zZXBhcmF0b3IiLCJEYXRlIiwiZ2V0VGltZSIsIl9yZWZyZXNoRHVyYXRpb24iLCJ1c2VJbWFnZSIsIl9pc1N0b3JhZ2VGaWxlIiwiX2NhbGxiYWNrIiwiX3N0b3JhZ2VSZXNwb25zZSIsImUiLCJfc3RvcmFnZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJBcnJheSIsImlzQXJyYXkiLCJkZXRhaWwiLCJfY29uZmlndXJlIiwic3RyIiwiZ2V0RWxlbWVudEJ5SWQiLCJib2R5IiwiY29sb3IiLCJjbGFzc05hbWUiLCJwb3NpdGlvbiIsInNjYWxlIiwiT2JqZWN0Iiwia2V5cyIsImJhY2tncm91bmRTdG9yYWdlIiwibGVuZ3RoIiwiYWRkRXZlbnRMaXN0ZW5lciIsInNldEF0dHJpYnV0ZSIsImZvbGRlciIsImZpbGVOYW1lIiwiY29tcGFueUlkIiwiZ28iLCJjb25zb2xlIiwibG9nIiwic3BsaXQiLCJjYiIsIndpbmRvdyIsImFkZGl0aW9uYWxQYXJhbXMiLCJuYW1lcyIsInZhbHVlcyIsIkpTT04iLCJwYXJzZSIsInByZWZzIiwiaWQiLCJvbmNvbnRleHRtZW51IiwicmVnaXN0ZXIiLCJfZ2FxIiwicHVzaCIsImdhIiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJhc3luYyIsInNyYyIsImxvY2F0aW9uIiwicHJvdG9jb2wiLCJzIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIl0sIm1hcHBpbmdzIjoiQUFFQSxHQUFzQixtQkFBWEEsUUFBd0IsQ0FDakMsR0FBSUEsVUFJbUIsb0JBQVpDLFdBQ1RBLFFBQVFDLE9BQU8sb0NBQ1pDLFNBQVMsaUJBQWtCLHVEQUMzQkEsU0FBUyxnQkFBaUIsU0FFN0JGLFFBQVFDLE9BQU8sb0RBQ1pFLE1BQU0sZ0JBQWlCLDBGQU05QixHQUFJQyxZQUFhQSxjQUNqQkEsWUFBV0MsZUFFWEQsV0FBV0MsWUFBYyxTQUFXQyxFQUFVQyxHQUM1QyxZQVNBLFNBQVNDLEtBQ1BELEVBQVFFLElBQUlDLEtBQUssR0FBSSxnQkFBaUIsS0FBTUMsRUFBT0MsVUFBVSxPQUMzRCxHQUFNLEdBQU0sR0FBTSxHQUFNLEdBRzVCLFFBQVNDLEtBRVBMLElBTUYsUUFBU00sTUFJVCxRQUFTQyxNQUlULFFBQVNDLEdBQW9CQyxHQUMzQk4sRUFBUyxHQUFJSixHQUFRVyxNQUNyQkMsRUFBb0JGLEVBR3BCRyxFQUFjLEdBQUloQixZQUFXaUIsT0FBT0MsV0FBV0gsR0FDL0NDLEVBQVlHLEtBQUtWLEdBR25CLFFBQVNXLE1BckNULEdBQUliLEdBQVMsS0FDWFEsS0FDQUMsRUFBYyxJQXVDaEIsUUFDRU4sTUFBU0EsRUFDVEMsS0FBUUEsRUFDUkMsb0JBQXVCQSxFQUN2QlEsS0FBUUEsSUFHVGxCLFNBQVVDLFFBRWIsSUFBSUgsWUFBYUEsY0FDakJBLFlBQVdpQixPQUFTakIsV0FBV2lCLFdBRS9CakIsV0FBV2lCLE9BQU9DLFdBQWEsU0FBVUcsR0FDdkMsWUFhQSxTQUFTQyxLQUNQQyxXQUFXLFdBQ1RQLEVBQVlRLE1BQU1DLGdCQUFrQixPQUFTSixFQUFLSyxXQUFXQyxNQUFNQyxJQUFNQyxFQUFh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LGtCQUFtQkYsRUFBR0csT0FBUSxFQUNuRkgsRUFBR0ksS0FBTyxVQUFZL0UsU0FBU2dGLFNBQVNDLFNBQVcsY0FBZ0IsY0FBZ0IsNkJBQ25GLElBQUlDLEdBQUlsRixTQUFTbUYscUJBQXFCLFVBQVUsRUFBSUQsR0FBRUUsV0FBV0MsYUFBYVYsRUFBSU8iLCJmaWxlIjoianMvd2lkZ2V0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBjb25maWc6IHRydWUgKi9cbi8qIGV4cG9ydGVkIGNvbmZpZyAqL1xuaWYgKHR5cGVvZiBjb25maWcgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgdmFyIGNvbmZpZyA9IHtcbiAgICAvLyB2YXJpYWJsZXMgZ28gaGVyZVxuICB9O1xuXG4gIGlmICh0eXBlb2YgYW5ndWxhciAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi5jb21tb24uaTE4bi5jb25maWdcIiwgW10pXG4gICAgICAuY29uc3RhbnQoXCJMT0NBTEVTX1BSRUZJWFwiLCBcImNvbXBvbmVudHMvcnYtY29tbW9uLWkxOG4vZGlzdC9sb2NhbGVzL3RyYW5zbGF0aW9uX1wiKVxuICAgICAgLmNvbnN0YW50KFwiTE9DQUxFU19TVUZJWFwiLCBcIi5qc29uXCIpO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoXCJyaXNldmlzaW9uLndpZGdldC5jb21tb24uc3RvcmFnZS1zZWxlY3Rvci5jb25maWdcIilcbiAgICAgIC52YWx1ZShcIlNUT1JBR0VfTU9EQUxcIiwgXCJodHRwOi8vc3RvcmFnZS5yaXNldmlzaW9uLmNvbS9+cnZpL3N0b3JhZ2UtY2xpZW50LXJ2YS10ZXN0L3N0b3JhZ2UtbW9kYWwuaHRtbCMvZmlsZXMvXCIpO1xuICB9XG59XG5cbi8qIGdsb2JhbCBnYWRnZXRzICovXG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uVmlkZW9Gb2xkZXIgPSB7fTtcblxuUmlzZVZpc2lvbi5WaWRlb0ZvbGRlciA9IChmdW5jdGlvbiAoZG9jdW1lbnQsIGdhZGdldHMpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9wcmVmcyA9IG51bGwsXG4gICAgX2FkZGl0aW9uYWxQYXJhbXMgPSB7fSxcbiAgICBfYmFja2dyb3VuZCA9IG51bGw7XG5cbiAgLypcbiAgICogIFByaXZhdGUgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gX3JlYWR5KCkge1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc2V2ZW50X3JlYWR5XCIsIG51bGwsIF9wcmVmcy5nZXRTdHJpbmcoXCJpZFwiKSxcbiAgICAgIHRydWUsIHRydWUsIHRydWUsIHRydWUsIHRydWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2JhY2tncm91bmRSZWFkeSgpIHtcbiAgICAvLyBUT0RPOiBjb250aW51ZSBkZXZlbG9wbWVudCBvZiBwbGF5aW5nIHZpZGVvcyBmcm9tIGhlcmUsIHRlbXBvcmFyaWx5IGNhbGwgX3JlYWR5KClcbiAgICBfcmVhZHkoKTtcbiAgfVxuXG4gIC8qXG4gICAqICBQdWJsaWMgTWV0aG9kc1xuICAgKi9cbiAgZnVuY3Rpb24gcGF1c2UoKSB7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHBsYXkoKSB7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHNldEFkZGl0aW9uYWxQYXJhbXMocGFyYW1zKSB7XG4gICAgX3ByZWZzID0gbmV3IGdhZGdldHMuUHJlZnMoKTtcbiAgICBfYWRkaXRpb25hbFBhcmFtcyA9IHBhcmFtcztcblxuICAgIC8vIGNyZWF0ZSBhbmQgaW5pdGlhbGl6ZSB0aGUgQmFja2dyb3VuZCBpbnN0YW5jZVxuICAgIF9iYWNrZ3JvdW5kID0gbmV3IFJpc2VWaXNpb24uQ29tbW9uLkJhY2tncm91bmQoX2FkZGl0aW9uYWxQYXJhbXMpO1xuICAgIF9iYWNrZ3JvdW5kLmluaXQoX2JhY2tncm91bmRSZWFkeSk7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wKCkge1xuXG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwicGF1c2VcIjogcGF1c2UsXG4gICAgXCJwbGF5XCI6IHBsYXksXG4gICAgXCJzZXRBZGRpdGlvbmFsUGFyYW1zXCI6IHNldEFkZGl0aW9uYWxQYXJhbXMsXG4gICAgXCJzdG9wXCI6IHN0b3BcbiAgfTtcblxufSkoZG9jdW1lbnQsIGdhZGdldHMpO1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLkNvbW1vbiA9IFJpc2VWaXNpb24uQ29tbW9uIHx8IHt9O1xuXG5SaXNlVmlzaW9uLkNvbW1vbi5CYWNrZ3JvdW5kID0gZnVuY3Rpb24gKGRhdGEpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgdmFyIF9jYWxsYmFjayA9IG51bGwsXG4gICAgX3JlYWR5ID0gZmFsc2UsXG4gICAgX2JhY2tncm91bmQgPSBudWxsLFxuICAgIF9zdG9yYWdlID0gbnVsbCxcbiAgICBfcmVmcmVzaER1cmF0aW9uID0gOTAwMDAwLCAvLyAxNSBtaW51dGVzXG4gICAgX2lzU3RvcmFnZUZpbGUgPSBmYWxzZSxcbiAgICBfc2VwYXJhdG9yID0gXCJcIjtcblxuICAvKlxuICAgKiBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIF9yZWZyZXNoVGltZXIoKSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiBiYWNrZ3JvdW5kUmVmcmVzaCgpIHtcbiAgICAgIF9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgZGF0YS5iYWNrZ3JvdW5kLmltYWdlLnVybCArIF9zZXBhcmF0b3IgKyBcImNiPVwiICsgbmV3IERhdGUoKS5nZXRUaW1lKCkgKyBcIilcIjtcbiAgICAgIF9yZWZyZXNoVGltZXIoKTtcbiAgICB9LCBfcmVmcmVzaER1cmF0aW9uKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9iYWNrZ3JvdW5kUmVhZHkoKSB7XG4gICAgX3JlYWR5ID0gdHJ1ZTtcblxuICAgIGlmIChkYXRhLmJhY2tncm91bmQudXNlSW1hZ2UgJiYgIV9pc1N0b3JhZ2VGaWxlKSB7XG4gICAgICAvLyBzdGFydCB0aGUgcmVmcmVzaCBwb2xsIGZvciBub24tc3RvcmFnZSBiYWNrZ3JvdW5kIGltYWdlXG4gICAgICBfcmVmcmVzaFRpbWVyKCk7XG4gICAgfVxuXG4gICAgaWYgKF9jYWxsYmFjayAmJiB0eXBlb2YgX2NhbGxiYWNrID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIF9jYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIF9zdG9yYWdlUmVzcG9uc2UoZSkge1xuICAgIF9zdG9yYWdlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyaXNlLXN0b3JhZ2UtcmVzcG9uc2VcIiwgX3N0b3JhZ2VSZXNwb25zZSk7XG5cbiAgICBpZiAoQXJyYXkuaXNBcnJheShlLmRldGFpbCkpIHtcbiAgICAgIF9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgZS5kZXRhaWxbMF0gKyBcIilcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyBlLmRldGFpbCArIFwiKVwiO1xuICAgIH1cbiAgICBfYmFja2dyb3VuZFJlYWR5KCk7XG4gIH1cblxuICBmdW5jdGlvbiBfY29uZmlndXJlKCkge1xuICAgIHZhciBzdHI7XG5cbiAgICBfYmFja2dyb3VuZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja2dyb3VuZFwiKTtcbiAgICBfc3RvcmFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYmFja2dyb3VuZFN0b3JhZ2VcIik7XG5cbiAgICAvLyBzZXQgdGhlIGRvY3VtZW50IGJhY2tncm91bmRcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmJhY2tncm91bmQgPSBkYXRhLmJhY2tncm91bmQuY29sb3I7XG5cbiAgICBpZiAoX2JhY2tncm91bmQpIHtcbiAgICAgIGlmIChkYXRhLmJhY2tncm91bmQudXNlSW1hZ2UpIHtcbiAgICAgICAgX2JhY2tncm91bmQuY2xhc3NOYW1lID0gZGF0YS5iYWNrZ3JvdW5kLmltYWdlLnBvc2l0aW9uO1xuICAgICAgICBfYmFja2dyb3VuZC5jbGFzc05hbWUgPSBkYXRhLmJhY2tncm91bmQuaW1hZ2Uuc2NhbGUgPyBfYmFja2dyb3VuZC5jbGFzc05hbWUgKyBcIiBzY2FsZS10by1maXRcIlxuICAgICAgICAgIDogX2JhY2tncm91bmQuY2xhc3NOYW1lO1xuXG4gICAgICAgIF9pc1N0b3JhZ2VGaWxlID0gKE9iamVjdC5rZXlzKGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UpLmxlbmd0aCAhPT0gMCk7XG5cbiAgICAgICAgaWYgKCFfaXNTdG9yYWdlRmlsZSkge1xuICAgICAgICAgIHN0ciA9IGRhdGEuYmFja2dyb3VuZC5pbWFnZS51cmwuc3BsaXQoXCI/XCIpO1xuXG4gICAgICAgICAgLy8gc3RvcmUgdGhpcyBmb3IgdGhlIHJlZnJlc2ggdGltZXJcbiAgICAgICAgICBfc2VwYXJhdG9yID0gKHN0ci5sZW5ndGggPT09IDEpID8gXCI/XCIgOiBcIiZcIjtcblxuICAgICAgICAgIF9iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IFwidXJsKFwiICsgZGF0YS5iYWNrZ3JvdW5kLmltYWdlLnVybCArIFwiKVwiO1xuICAgICAgICAgIF9iYWNrZ3JvdW5kUmVhZHkoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoX3N0b3JhZ2UpIHtcbiAgICAgICAgICAgIC8vIFJpc2UgU3RvcmFnZVxuICAgICAgICAgICAgX3N0b3JhZ2UuYWRkRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBfc3RvcmFnZVJlc3BvbnNlKTtcblxuICAgICAgICAgICAgX3N0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZm9sZGVyXCIsIGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UuZm9sZGVyKTtcbiAgICAgICAgICAgIF9zdG9yYWdlLnNldEF0dHJpYnV0ZShcImZpbGVOYW1lXCIsIGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UuZmlsZU5hbWUpO1xuICAgICAgICAgICAgX3N0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiY29tcGFueUlkXCIsIGRhdGEuYmFja2dyb3VuZFN0b3JhZ2UuY29tcGFueUlkKTtcbiAgICAgICAgICAgIF9zdG9yYWdlLmdvKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTWlzc2luZyBlbGVtZW50IHdpdGggaWQgdmFsdWUgb2YgJ2JhY2tncm91bmRTdG9yYWdlJ1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9iYWNrZ3JvdW5kUmVhZHkoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJNaXNzaW5nIGVsZW1lbnQgd2l0aCBpZCB2YWx1ZSBvZiAnYmFja2dyb3VuZCdcIik7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KGNiKSB7XG4gICAgaWYgKCFfcmVhZHkpIHtcbiAgICAgIGlmIChjYikge1xuICAgICAgICBfY2FsbGJhY2sgPSBjYjtcbiAgICAgIH1cblxuICAgICAgX2NvbmZpZ3VyZSgpO1xuXG4gICAgfSBlbHNlIGlmIChjYiAmJiB0eXBlb2YgY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgY2IoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgZ2FkZ2V0cywgUmlzZVZpc2lvbiAqL1xuXG4oZnVuY3Rpb24gKHdpbmRvdywgZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpLFxuICAgIGlkID0gcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIik7XG5cbiAgLy8gRGlzYWJsZSBjb250ZXh0IG1lbnUgKHJpZ2h0IGNsaWNrIG1lbnUpXG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBmdW5jdGlvbiBwbGF5KCkge1xuXG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcblxuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcblxuICB9XG5cbiAgZnVuY3Rpb24gYWRkaXRpb25hbFBhcmFtcyhuYW1lcywgdmFsdWVzKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpICYmIG5hbWVzLmxlbmd0aCA+IDAgJiYgbmFtZXNbMF0gPT09IFwiYWRkaXRpb25hbFBhcmFtc1wiKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW9Gb2xkZXIuc2V0QWRkaXRpb25hbFBhcmFtcyhKU09OLnBhcnNlKHZhbHVlc1swXSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChpZCAmJiBpZCAhPT0gXCJcIikge1xuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNjbWRfcGxheV9cIiArIGlkLCBwbGF5KTtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BhdXNlX1wiICsgaWQsIHBhdXNlKTtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3N0b3BfXCIgKyBpZCwgc3RvcCk7XG5cbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzcGFyYW1fc2V0X1wiICsgaWQsIGFkZGl0aW9uYWxQYXJhbXMpO1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgW1wiYWRkaXRpb25hbFBhcmFtc1wiXSk7XG4gIH1cblxufSkod2luZG93LCBnYWRnZXRzKTtcblxuXG5cbi8qIGpzaGludCBpZ25vcmU6c3RhcnQgKi9cbnZhciBfZ2FxID0gX2dhcSB8fCBbXTtcblxuX2dhcS5wdXNoKFsnX3NldEFjY291bnQnLCAnVUEtNTcwOTIxNTktNCddKTtcbl9nYXEucHVzaChbJ190cmFja1BhZ2V2aWV3J10pO1xuXG4oZnVuY3Rpb24oKSB7XG4gIHZhciBnYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOyBnYS50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7IGdhLmFzeW5jID0gdHJ1ZTtcbiAgZ2Euc3JjID0gKCdodHRwczonID09IGRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sID8gJ2h0dHBzOi8vc3NsJyA6ICdodHRwOi8vd3d3JykgKyAnLmdvb2dsZS1hbmFseXRpY3MuY29tL2dhLmpzJztcbiAgdmFyIHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc2NyaXB0JylbMF07IHMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZ2EsIHMpO1xufSkoKTtcbi8qIGpzaGludCBpZ25vcmU6ZW5kICovXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=