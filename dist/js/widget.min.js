if("undefined"==typeof config){var config={};"undefined"!=typeof angular&&(angular.module("risevision.common.i18n.config",[]).constant("LOCALES_PREFIX","components/rv-common-i18n/dist/locales/translation_").constant("LOCALES_SUFIX",".json"),angular.module("risevision.widget.common.storage-selector.config").value("STORAGE_MODAL","http://storage.risevision.com/~rvi/storage-client-rva-test/storage-modal.html#/files/"))}var RiseVision=RiseVision||{};RiseVision.VideoFolder={},RiseVision.VideoFolder=function(e,n){"use strict";function t(){n.rpc.call("","rsevent_ready",null,l.getString("id"),!0,!0,!0,!0,!0)}function o(){t()}function i(){}function r(){}function a(e){g=e}function s(e){l=new n.Prefs,u=e,d=new RiseVision.Common.Background(u,g),d.init(o)}function c(){}var l=null,u={},g=null,d=null;return{pause:i,play:r,setCompanyId:a,setAdditionalParams:s,stop:c}}(document,gadgets);var RiseVision=RiseVision||{};RiseVision.Common=RiseVision.Common||{},RiseVision.Common.Background=function(e,n){"use strict";function t(){s=!0,a&&"function"==typeof a&&a()}function o(e){l.removeEventListener("rise-storage-response",o),c.style.backgroundImage=Array.isArray(e.detail)?"url("+e.detail[0]+")":"url("+e.detail+")",t()}function i(){c=document.getElementById("background"),l=document.getElementById("backgroundStorage"),document.body.style.background=e.background.color,c?e.background.useImage?(c.className=e.background.image.position,c.className=e.background.image.scale?c.className+" scale-to-fit":c.className,0===Object.keys(e.backgroundStorage).length?(c.style.backgroundImage="url("+e.background.image.url+")",t()):l?(l.addEventListener("rise-storage-response",o),l.setAttribute("folder",e.backgroundStorage.folder),l.setAttribute("fileName",e.backgroundStorage.fileName),l.setAttribute("companyId",n),l.go()):console.log("Missing element with id value of 'backgroundStorage'")):t():console.log("Missing element with id value of 'background'")}function r(e){s?e&&"function"==typeof e&&e():(e&&(a=e),i())}var a=null,s=!1,c=null,l=null;return{init:r}},function(e,n){"use strict";function t(){}function o(){}function i(){}function r(e,n){Array.isArray(e)&&e.length>0&&"additionalParams"===e[0]&&Array.isArray(n)&&n.length>0&&RiseVision.VideoFolder.setAdditionalParams(JSON.parse(n[0]))}function a(e,t){e&&"companyId"===e&&RiseVision.VideoFolder.setCompanyId(t),n.rpc.register("rsparam_set_"+c,r),n.rpc.call("","rsparam_get",null,c,["additionalParams"])}var s=new n.Prefs,c=s.getString("id");e.oncontextmenu=function(){return!1},c&&""!==c&&(n.rpc.register("rscmd_play_"+c,t),n.rpc.register("rscmd_pause_"+c,o),n.rpc.register("rscmd_stop_"+c,i),n.rpc.register("rsparam_set_"+c,a),n.rpc.call("","rsparam_get",null,c,"companyId"))}(window,gadgets);var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-57092159-4"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpzL3dpZGdldC5taW4uanMiXSwibmFtZXMiOlsiY29uZmlnIiwiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwidmFsdWUiLCJSaXNlVmlzaW9uIiwiVmlkZW9Gb2xkZXIiLCJkb2N1bWVudCIsImdhZGdldHMiLCJfcmVhZHkiLCJycGMiLCJjYWxsIiwiX3ByZWZzIiwiZ2V0U3RyaW5nIiwiX2JhY2tncm91bmRSZWFkeSIsInBhdXNlIiwicGxheSIsInNldENvbXBhbnlJZCIsIl9jb21wYW55SWQiLCJzZXRBZGRpdGlvbmFsUGFyYW1zIiwicGFyYW1zIiwiUHJlZnMiLCJfYWRkaXRpb25hbFBhcmFtcyIsIl9iYWNrZ3JvdW5kIiwiQ29tbW9uIiwiQmFja2dyb3VuZCIsImluaXQiLCJzdG9wIiwiZGF0YSIsImNvbXBhbnlJZCIsIl9jYWxsYmFjayIsIl9zdG9yYWdlUmVzcG9uc2UiLCJlIiwiX3N0b3JhZ2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJBcnJheSIsImlzQXJyYXkiLCJkZXRhaWwiLCJfY29uZmlndXJlIiwiZ2V0RWxlbWVudEJ5SWQiLCJib2R5IiwiYmFja2dyb3VuZCIsImNvbG9yIiwidXNlSW1hZ2UiLCJjbGFzc05hbWUiLCJpbWFnZSIsInBvc2l0aW9uIiwic2NhbGUiLCJPYmplY3QiLCJrZXlzIiwiYmFja2dyb3VuZFN0b3JhZ2UiLCJsZW5ndGgiLCJ1cmwiLCJhZGRFdmVudExpc3RlbmVyIiwic2V0QXR0cmlidXRlIiwiZm9sZGVyIiwiZmlsZU5hbWUiLCJnbyIsImNvbnNvbGUiLCJsb2ciLCJjYiIsIndpbmRvdyIsImFkZGl0aW9uYWxQYXJhbXMiLCJuYW1lcyIsInZhbHVlcyIsIkpTT04iLCJwYXJzZSIsIm5hbWUiLCJyZWdpc3RlciIsImlkIiwicHJlZnMiLCJvbmNvbnRleHRtZW51IiwiX2dhcSIsInB1c2giLCJnYSIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwiYXN5bmMiLCJzcmMiLCJsb2NhdGlvbiIsInByb3RvY29sIiwicyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwicGFyZW50Tm9kZSIsImluc2VydEJlZm9yZSJdLCJtYXBwaW5ncyI6IkFBRUEsR0FBc0IsbUJBQVhBLFFBQXdCLENBQ2pDLEdBQUlBLFVBSW1CLG9CQUFaQyxXQUNUQSxRQUFRQyxPQUFPLG9DQUNaQyxTQUFTLGlCQUFrQix1REFDM0JBLFNBQVMsZ0JBQWlCLFNBRTdCRixRQUFRQyxPQUFPLG9EQUNaRSxNQUFNLGdCQUFpQiwwRkFNOUIsR0FBSUMsWUFBYUEsY0FDakJBLFlBQVdDLGVBRVhELFdBQVdDLFlBQWMsU0FBV0MsRUFBVUMsR0FDNUMsWUFVQSxTQUFTQyxLQUNQRCxFQUFRRSxJQUFJQyxLQUFLLEdBQUksZ0JBQWlCLEtBQU1DLEVBQU9DLFVBQVUsT0FDM0QsR0FBTSxHQUFNLEdBQU0sR0FBTSxHQUc1QixRQUFTQyxLQUVQTCxJQU1GLFFBQVNNLE1BSVQsUUFBU0MsTUFJVCxRQUFTQyxHQUFhYixHQUNwQmMsRUFBYWQsRUFHZixRQUFTZSxHQUFvQkMsR0FDM0JSLEVBQVMsR0FBSUosR0FBUWEsTUFDckJDLEVBQW9CRixFQUdwQkcsRUFBYyxHQUFJbEIsWUFBV21CLE9BQU9DLFdBQVdILEVBQW1CSixHQUNsRUssRUFBWUcsS0FBS1osR0FHbkIsUUFBU2EsTUExQ1QsR0FBSWYsR0FBUyxLQUNYVSxLQUNBSixFQUFhLEtBQ2JLLEVBQWMsSUEyQ2hCLFFBQ0VSLE1BQVNBLEVBQ1RDLEtBQVFBLEVBQ1JDLGFBQWdCQSxFQUNoQkUsb0JBQXVCQSxFQUN2QlEsS0FBUUEsSUFHVHBCLFNBQVVDLFFBRWIsSUFBSUgsWUFBYUEsY0FDakJBLFlBQVdtQixPQUFTbkIsV0FBV21CLFdBRS9CbkIsV0FBV21CLE9BQU9DLFdBQWEsU0FBVUcsRUFBTUMsR0FDN0MsWUFVQSxTQUFTZixLQUNQTCxHQUFTLEVBRUxxQixHQUFrQyxrQkFBZEEsSUFDdEJBLElBSUosUUFBU0MsR0FBaUJDLEdBQ3hCQyxFQUFTQyxvQkFBb0Is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dC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgY29uZmlnOiB0cnVlICovXG4vKiBleHBvcnRlZCBjb25maWcgKi9cbmlmICh0eXBlb2YgY29uZmlnID09PSBcInVuZGVmaW5lZFwiKSB7XG4gIHZhciBjb25maWcgPSB7XG4gICAgLy8gdmFyaWFibGVzIGdvIGhlcmVcbiAgfTtcblxuICBpZiAodHlwZW9mIGFuZ3VsYXIgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICBhbmd1bGFyLm1vZHVsZShcInJpc2V2aXNpb24uY29tbW9uLmkxOG4uY29uZmlnXCIsIFtdKVxuICAgICAgLmNvbnN0YW50KFwiTE9DQUxFU19QUkVGSVhcIiwgXCJjb21wb25lbnRzL3J2LWNvbW1vbi1pMThuL2Rpc3QvbG9jYWxlcy90cmFuc2xhdGlvbl9cIilcbiAgICAgIC5jb25zdGFudChcIkxPQ0FMRVNfU1VGSVhcIiwgXCIuanNvblwiKTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKFwicmlzZXZpc2lvbi53aWRnZXQuY29tbW9uLnN0b3JhZ2Utc2VsZWN0b3IuY29uZmlnXCIpXG4gICAgICAudmFsdWUoXCJTVE9SQUdFX01PREFMXCIsIFwiaHR0cDovL3N0b3JhZ2UucmlzZXZpc2lvbi5jb20vfnJ2aS9zdG9yYWdlLWNsaWVudC1ydmEtdGVzdC9zdG9yYWdlLW1vZGFsLmh0bWwjL2ZpbGVzL1wiKTtcbiAgfVxufVxuXG4vKiBnbG9iYWwgZ2FkZ2V0cyAqL1xuXG52YXIgUmlzZVZpc2lvbiA9IFJpc2VWaXNpb24gfHwge307XG5SaXNlVmlzaW9uLlZpZGVvRm9sZGVyID0ge307XG5cblJpc2VWaXNpb24uVmlkZW9Gb2xkZXIgPSAoZnVuY3Rpb24gKGRvY3VtZW50LCBnYWRnZXRzKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfcHJlZnMgPSBudWxsLFxuICAgIF9hZGRpdGlvbmFsUGFyYW1zID0ge30sXG4gICAgX2NvbXBhbnlJZCA9IG51bGwsXG4gICAgX2JhY2tncm91bmQgPSBudWxsO1xuXG4gIC8qXG4gICAqICBQcml2YXRlIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIF9yZWFkeSgpIHtcbiAgICBnYWRnZXRzLnJwYy5jYWxsKFwiXCIsIFwicnNldmVudF9yZWFkeVwiLCBudWxsLCBfcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIiksXG4gICAgICB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlLCB0cnVlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9iYWNrZ3JvdW5kUmVhZHkoKSB7XG4gICAgLy8gVE9ETzogY29udGludWUgZGV2ZWxvcG1lbnQgb2YgcGxheWluZyB2aWRlb3MgZnJvbSBoZXJlLCB0ZW1wb3JhcmlseSBjYWxsIF9yZWFkeSgpXG4gICAgX3JlYWR5KCk7XG4gIH1cblxuICAvKlxuICAgKiAgUHVibGljIE1ldGhvZHNcbiAgICovXG4gIGZ1bmN0aW9uIHBhdXNlKCkge1xuXG4gIH1cblxuICBmdW5jdGlvbiBwbGF5KCkge1xuXG4gIH1cblxuICBmdW5jdGlvbiBzZXRDb21wYW55SWQodmFsdWUpIHtcbiAgICBfY29tcGFueUlkID0gdmFsdWU7XG4gIH1cblxuICBmdW5jdGlvbiBzZXRBZGRpdGlvbmFsUGFyYW1zKHBhcmFtcykge1xuICAgIF9wcmVmcyA9IG5ldyBnYWRnZXRzLlByZWZzKCk7XG4gICAgX2FkZGl0aW9uYWxQYXJhbXMgPSBwYXJhbXM7XG5cbiAgICAvLyBjcmVhdGUgYW5kIGluaXRpYWxpemUgdGhlIEJhY2tncm91bmQgaW5zdGFuY2VcbiAgICBfYmFja2dyb3VuZCA9IG5ldyBSaXNlVmlzaW9uLkNvbW1vbi5CYWNrZ3JvdW5kKF9hZGRpdGlvbmFsUGFyYW1zLCBfY29tcGFueUlkKTtcbiAgICBfYmFja2dyb3VuZC5pbml0KF9iYWNrZ3JvdW5kUmVhZHkpO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcblxuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBcInBhdXNlXCI6IHBhdXNlLFxuICAgIFwicGxheVwiOiBwbGF5LFxuICAgIFwic2V0Q29tcGFueUlkXCI6IHNldENvbXBhbnlJZCxcbiAgICBcInNldEFkZGl0aW9uYWxQYXJhbXNcIjogc2V0QWRkaXRpb25hbFBhcmFtcyxcbiAgICBcInN0b3BcIjogc3RvcFxuICB9O1xuXG59KShkb2N1bWVudCwgZ2FkZ2V0cyk7XG5cbnZhciBSaXNlVmlzaW9uID0gUmlzZVZpc2lvbiB8fCB7fTtcblJpc2VWaXNpb24uQ29tbW9uID0gUmlzZVZpc2lvbi5Db21tb24gfHwge307XG5cblJpc2VWaXNpb24uQ29tbW9uLkJhY2tncm91bmQgPSBmdW5jdGlvbiAoZGF0YSwgY29tcGFueUlkKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIHZhciBfY2FsbGJhY2sgPSBudWxsLFxuICAgIF9yZWFkeSA9IGZhbHNlLFxuICAgIF9iYWNrZ3JvdW5kID0gbnVsbCxcbiAgICBfc3RvcmFnZSA9IG51bGw7XG5cbiAgLypcbiAgICogUHJpdmF0ZSBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBfYmFja2dyb3VuZFJlYWR5KCkge1xuICAgIF9yZWFkeSA9IHRydWU7XG5cbiAgICBpZiAoX2NhbGxiYWNrICYmIHR5cGVvZiBfY2FsbGJhY2sgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgX2NhbGxiYWNrKCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gX3N0b3JhZ2VSZXNwb25zZShlKSB7XG4gICAgX3N0b3JhZ2UucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJpc2Utc3RvcmFnZS1yZXNwb25zZVwiLCBfc3RvcmFnZVJlc3BvbnNlKTtcblxuICAgIGlmIChBcnJheS5pc0FycmF5KGUuZGV0YWlsKSkge1xuICAgICAgX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyBlLmRldGFpbFswXSArIFwiKVwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBfYmFja2dyb3VuZC5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBcInVybChcIiArIGUuZGV0YWlsICsgXCIpXCI7XG4gICAgfVxuICAgIF9iYWNrZ3JvdW5kUmVhZHkoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9jb25maWd1cmUoKSB7XG4gICAgX2JhY2tncm91bmQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhY2tncm91bmRcIik7XG4gICAgX3N0b3JhZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImJhY2tncm91bmRTdG9yYWdlXCIpO1xuXG4gICAgLy8gc2V0IHRoZSBkb2N1bWVudCBiYWNrZ3JvdW5kXG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gZGF0YS5iYWNrZ3JvdW5kLmNvbG9yO1xuXG4gICAgaWYgKF9iYWNrZ3JvdW5kKSB7XG4gICAgICBpZiAoZGF0YS5iYWNrZ3JvdW5kLnVzZUltYWdlKSB7XG4gICAgICAgIF9iYWNrZ3JvdW5kLmNsYXNzTmFtZSA9IGRhdGEuYmFja2dyb3VuZC5pbWFnZS5wb3NpdGlvbjtcbiAgICAgICAgX2JhY2tncm91bmQuY2xhc3NOYW1lID0gZGF0YS5iYWNrZ3JvdW5kLmltYWdlLnNjYWxlID8gX2JhY2tncm91bmQuY2xhc3NOYW1lICsgXCIgc2NhbGUtdG8tZml0XCJcbiAgICAgICAgICA6IF9iYWNrZ3JvdW5kLmNsYXNzTmFtZTtcblxuICAgICAgICBpZiAoT2JqZWN0LmtleXMoZGF0YS5iYWNrZ3JvdW5kU3RvcmFnZSkubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgX2JhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gXCJ1cmwoXCIgKyBkYXRhLmJhY2tncm91bmQuaW1hZ2UudXJsICsgXCIpXCI7XG4gICAgICAgICAgX2JhY2tncm91bmRSZWFkeSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmIChfc3RvcmFnZSkge1xuICAgICAgICAgICAgLy8gUmlzZSBTdG9yYWdlXG4gICAgICAgICAgICBfc3RvcmFnZS5hZGRFdmVudExpc3RlbmVyKFwicmlzZS1zdG9yYWdlLXJlc3BvbnNlXCIsIF9zdG9yYWdlUmVzcG9uc2UpO1xuXG4gICAgICAgICAgICBfc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJmb2xkZXJcIiwgZGF0YS5iYWNrZ3JvdW5kU3RvcmFnZS5mb2xkZXIpO1xuICAgICAgICAgICAgX3N0b3JhZ2Uuc2V0QXR0cmlidXRlKFwiZmlsZU5hbWVcIiwgZGF0YS5iYWNrZ3JvdW5kU3RvcmFnZS5maWxlTmFtZSk7XG4gICAgICAgICAgICBfc3RvcmFnZS5zZXRBdHRyaWJ1dGUoXCJjb21wYW55SWRcIiwgY29tcGFueUlkKTtcbiAgICAgICAgICAgIF9zdG9yYWdlLmdvKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiTWlzc2luZyBlbGVtZW50IHdpdGggaWQgdmFsdWUgb2YgJ2JhY2tncm91bmRTdG9yYWdlJ1wiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF9iYWNrZ3JvdW5kUmVhZHkoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5sb2coXCJNaXNzaW5nIGVsZW1lbnQgd2l0aCBpZCB2YWx1ZSBvZiAnYmFja2dyb3VuZCdcIik7XG4gICAgfVxuICB9XG5cbiAgLypcbiAgICogIFB1YmxpYyBNZXRob2RzXG4gICAqL1xuICBmdW5jdGlvbiBpbml0KGNiKSB7XG4gICAgaWYgKCFfcmVhZHkpIHtcbiAgICAgIGlmIChjYikge1xuICAgICAgICBfY2FsbGJhY2sgPSBjYjtcbiAgICAgIH1cblxuICAgICAgX2NvbmZpZ3VyZSgpO1xuXG4gICAgfSBlbHNlIGlmIChjYiAmJiB0eXBlb2YgY2IgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgY2IoKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4ge1xuICAgIFwiaW5pdFwiOiBpbml0XG4gIH07XG59O1xuXG4vKiBnbG9iYWwgZ2FkZ2V0cywgUmlzZVZpc2lvbiAqL1xuXG4oZnVuY3Rpb24gKHdpbmRvdywgZ2FkZ2V0cykge1xuICBcInVzZSBzdHJpY3RcIjtcblxuICB2YXIgcHJlZnMgPSBuZXcgZ2FkZ2V0cy5QcmVmcygpLFxuICAgIGlkID0gcHJlZnMuZ2V0U3RyaW5nKFwiaWRcIik7XG5cbiAgLy8gRGlzYWJsZSBjb250ZXh0IG1lbnUgKHJpZ2h0IGNsaWNrIG1lbnUpXG4gIHdpbmRvdy5vbmNvbnRleHRtZW51ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBmdW5jdGlvbiBwbGF5KCkge1xuXG4gIH1cblxuICBmdW5jdGlvbiBwYXVzZSgpIHtcblxuICB9XG5cbiAgZnVuY3Rpb24gc3RvcCgpIHtcblxuICB9XG5cbiAgZnVuY3Rpb24gYWRkaXRpb25hbFBhcmFtcyhuYW1lcywgdmFsdWVzKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkobmFtZXMpICYmIG5hbWVzLmxlbmd0aCA+IDAgJiYgbmFtZXNbMF0gPT09IFwiYWRkaXRpb25hbFBhcmFtc1wiKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZXMpICYmIHZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIFJpc2VWaXNpb24uVmlkZW9Gb2xkZXIuc2V0QWRkaXRpb25hbFBhcmFtcyhKU09OLnBhcnNlKHZhbHVlc1swXSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbXBhbnlJZChuYW1lLCB2YWx1ZSkge1xuICAgIGlmIChuYW1lICYmIG5hbWUgPT09IFwiY29tcGFueUlkXCIpIHtcbiAgICAgIFJpc2VWaXNpb24uVmlkZW9Gb2xkZXIuc2V0Q29tcGFueUlkKHZhbHVlKTtcbiAgICB9XG5cbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzcGFyYW1fc2V0X1wiICsgaWQsIGFkZGl0aW9uYWxQYXJhbXMpO1xuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgW1wiYWRkaXRpb25hbFBhcmFtc1wiXSk7XG4gIH1cblxuICBpZiAoaWQgJiYgaWQgIT09IFwiXCIpIHtcbiAgICBnYWRnZXRzLnJwYy5yZWdpc3RlcihcInJzY21kX3BsYXlfXCIgKyBpZCwgcGxheSk7XG4gICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9wYXVzZV9cIiArIGlkLCBwYXVzZSk7XG4gICAgZ2FkZ2V0cy5ycGMucmVnaXN0ZXIoXCJyc2NtZF9zdG9wX1wiICsgaWQsIHN0b3ApO1xuICAgIGdhZGdldHMucnBjLnJlZ2lzdGVyKFwicnNwYXJhbV9zZXRfXCIgKyBpZCwgY29tcGFueUlkKTtcblxuICAgIGdhZGdldHMucnBjLmNhbGwoXCJcIiwgXCJyc3BhcmFtX2dldFwiLCBudWxsLCBpZCwgXCJjb21wYW55SWRcIik7XG5cbiAgfVxuXG59KSh3aW5kb3csIGdhZGdldHMpO1xuXG5cblxuLyoganNoaW50IGlnbm9yZTpzdGFydCAqL1xudmFyIF9nYXEgPSBfZ2FxIHx8IFtdO1xuXG5fZ2FxLnB1c2goWydfc2V0QWNjb3VudCcsICdVQS01NzA5MjE1OS00J10pO1xuX2dhcS5wdXNoKFsnX3RyYWNrUGFnZXZpZXcnXSk7XG5cbihmdW5jdGlvbigpIHtcbiAgdmFyIGdhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7IGdhLnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JzsgZ2EuYXN5bmMgPSB0cnVlO1xuICBnYS5zcmMgPSAoJ2h0dHBzOicgPT0gZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2wgPyAnaHR0cHM6Ly9zc2wnIDogJ2h0dHA6Ly93d3cnKSArICcuZ29vZ2xlLWFuYWx5dGljcy5jb20vZ2EuanMnO1xuICB2YXIgcyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdzY3JpcHQnKVswXTsgcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShnYSwgcyk7XG59KSgpO1xuLyoganNoaW50IGlnbm9yZTplbmQgKi9cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==